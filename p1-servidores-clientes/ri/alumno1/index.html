
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>Alumno 1: Adrián - Grupales de BD Grupo C 22/23</title>
<link href="../../../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../stylesheets/asciinema-player.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="red" data-md-color-primary="red" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#alumno-1">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Grupales de BD Grupo C 22/23" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Grupales de BD Grupo C 22/23">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Grupales de BD Grupo C 22/23
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Alumno 1: Adrián
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Cambiar a tema oscuro" class="md-option" data-md-color-accent="red" data-md-color-media="" data-md-color-primary="red" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Cambiar a tema oscuro">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Cambiar a tema normal" class="md-option" data-md-color-accent="red" data-md-color-media="" data-md-color-primary="red" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Cambiar a tema normal">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/adriasir123/grupalesbdc" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.546 10.93 13.067.452a1.55 1.55 0 0 0-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 0 1 2.327 2.341l2.658 2.66a1.838 1.838 0 0 1 1.9 3.039 1.837 1.837 0 0 1-2.6 0 1.846 1.846 0 0 1-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348a1.848 1.848 0 0 1 0 2.6 1.844 1.844 0 0 1-2.609 0 1.834 1.834 0 0 1 0-2.598c.182-.18.387-.316.605-.406V8.835a1.834 1.834 0 0 1-.996-2.41L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477a1.545 1.545 0 0 0 2.186 0l10.43-10.43a1.544 1.544 0 0 0 0-2.187"></path></svg>
</div>
<div class="md-source__repository">
    Repositorio
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
      Principal
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../intro/">
        Práctica 1 servidores y clientes
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../p4-grupal-plsql/intro/">
        Práctica 4 grupal de PL/SQL
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Grupales de BD Grupo C 22/23" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Grupales de BD Grupo C 22/23">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4Z"></path></svg>
</a>
    Grupales de BD Grupo C 22/23
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/adriasir123/grupalesbdc" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.546 10.93 13.067.452a1.55 1.55 0 0 0-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 0 1 2.327 2.341l2.658 2.66a1.838 1.838 0 0 1 1.9 3.039 1.837 1.837 0 0 1-2.6 0 1.846 1.846 0 0 1-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348a1.848 1.848 0 0 1 0 2.6 1.844 1.844 0 0 1-2.609 0 1.834 1.834 0 0 1 0-2.598c.182-.18.387-.316.605-.406V8.835a1.834 1.834 0 0 1-.996-2.41L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477a1.545 1.545 0 0 0 2.186 0l10.43-10.43a1.544 1.544 0 0 0 0-2.187"></path></svg>
</div>
<div class="md-source__repository">
    Repositorio
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Principal
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          Práctica 1 servidores y clientes
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Práctica 1 servidores y clientes" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Práctica 1 servidores y clientes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../intro/">
        Introducción
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2">
          Responsabilidad individual
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Responsabilidad individual" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          Responsabilidad individual
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Alumno 1: Adrián
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Alumno 1: Adrián
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#escenario">
    Escenario
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-oracle-19c">
    1. Oracle 19c
  </a>
<nav aria-label="1. Oracle 19c" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#11-redimension-de-disco">
    1.1 Redimensión de disco
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12-instalacion-del-servidor">
    1.2 Instalación del servidor
  </a>
<nav aria-label="1.2 Instalación del servidor" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#121">
    1.2.1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#122">
    1.2.2
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#123">
    1.2.3
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#124">
    1.2.4
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#125">
    1.2.5
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#126">
    1.2.6
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#127">
    1.2.7
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#128">
    1.2.8
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#129">
    1.2.9
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1210">
    1.2.10
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1211">
    1.2.11
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1212">
    1.2.12
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1213">
    1.2.13
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1214">
    1.2.14
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1215">
    1.2.15
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1216">
    1.2.16
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13-acceso-local-privilegiado">
    1.3 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14-creacion-de-usuario">
    1.4 Creación de usuario
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15-creacion-de-tablas">
    1.5 Creación de tablas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16-insercion-de-registros">
    1.6 Inserción de registros
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17-configuracion-del-acceso-remoto">
    1.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18-instalacion-del-cliente">
    1.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19-prueba-de-acceso-remoto">
    1.9 Prueba de acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#110-mejoras-de-sqlplus">
    1.10 Mejoras de sqlplus
  </a>
<nav aria-label="1.10 Mejoras de sqlplus" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1101">
    1.10.1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1102">
    1.10.2
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-postgresql">
    2. PostgreSQL
  </a>
<nav aria-label="2. PostgreSQL" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#21-instalacion-del-servidor">
    2.1 Instalación del servidor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22-acceso-local-privilegiado">
    2.2 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#23-creacion-de-la-base-de-datos">
    2.3 Creación de la base de datos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#24-creacion-de-tablas">
    2.4 Creación de tablas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#25-insercion-de-registros">
    2.5 Inserción de registros
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26-creacion-de-usuarios">
    2.6 Creación de usuarios
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#27-configuracion-del-acceso-remoto">
    2.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#28-instalacion-del-cliente">
    2.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#29-prueba-de-acceso-remoto">
    2.9 Prueba de acceso remoto
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-mariadb">
    3. MariaDB
  </a>
<nav aria-label="3. MariaDB" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#31-instalacion-del-servidor">
    3.1 Instalación del servidor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#32-acceso-local-privilegiado">
    3.2 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#33-creacion-de-la-base-de-datos">
    3.3 Creación de la base de datos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#34-creacion-de-tablas">
    3.4 Creación de tablas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#35-insercion-de-registros">
    3.5 Inserción de registros
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#36-creacion-de-usuarios">
    3.6 Creación de usuarios
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#37-configuracion-del-acceso-remoto">
    3.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#38-instalacion-del-cliente">
    3.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#39-prueba-de-acceso-remoto">
    3.9 Prueba de acceso remoto
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-mongodb">
    4. MongoDB
  </a>
<nav aria-label="4. MongoDB" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#41-instalacion-del-servidor">
    4.1 Instalación del servidor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#42-acceso-local-privilegiado">
    4.2 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#43-creacion-de-la-base-de-datos">
    4.3 Creación de la base de datos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#44-creacion-de-colecciones">
    4.4 Creación de colecciones
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#45-insercion-de-documentos">
    4.5 Inserción de documentos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#46-creacion-de-usuarios">
    4.6 Creación de usuarios
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#47-configuracion-del-acceso-remoto">
    4.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#48-instalacion-del-cliente">
    4.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#49-prueba-de-acceso-remoto">
    4.9 Prueba de acceso remoto
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-app-flask-con-mongodb">
    5. App Flask con MongoDB
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../alumno2/">
        Alumno 2: José Juan
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../alumno3/">
        Alumno 3: Arantxa
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../alumno4/">
        Alumno 4: Antonio
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3">
          Responsabilidad grupal
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Responsabilidad grupal" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          Responsabilidad grupal
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../rg/sql-developer/">
        SQL Developer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../rg/herramienta-postgresql/">
        phpPgAdmin
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../rg/phpmyadmin/">
        phpMyAdmin
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../rg/herramienta-mongodb/">
        MongoDB-PHP-GUI
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../rg/oracle-enterprise-manager/">
        Oracle Enterprise Manager
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Práctica 4 grupal de PL/SQL
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Práctica 4 grupal de PL/SQL" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Práctica 4 grupal de PL/SQL
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/intro/">
        Introducción
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio1/">
        Ejercicio 1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio2/">
        Ejercicio 2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio3/">
        Ejercicio 3
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio4/">
        Ejercicio 4
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio5/">
        Ejercicio 5
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio6/">
        Ejercicio 6
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio7/">
        Ejercicio 7
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../p4-grupal-plsql/ejercicio8/">
        Ejercicio 8
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#escenario">
    Escenario
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-oracle-19c">
    1. Oracle 19c
  </a>
<nav aria-label="1. Oracle 19c" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#11-redimension-de-disco">
    1.1 Redimensión de disco
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12-instalacion-del-servidor">
    1.2 Instalación del servidor
  </a>
<nav aria-label="1.2 Instalación del servidor" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#121">
    1.2.1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#122">
    1.2.2
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#123">
    1.2.3
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#124">
    1.2.4
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#125">
    1.2.5
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#126">
    1.2.6
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#127">
    1.2.7
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#128">
    1.2.8
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#129">
    1.2.9
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1210">
    1.2.10
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1211">
    1.2.11
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1212">
    1.2.12
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1213">
    1.2.13
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1214">
    1.2.14
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1215">
    1.2.15
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1216">
    1.2.16
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13-acceso-local-privilegiado">
    1.3 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14-creacion-de-usuario">
    1.4 Creación de usuario
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15-creacion-de-tablas">
    1.5 Creación de tablas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16-insercion-de-registros">
    1.6 Inserción de registros
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17-configuracion-del-acceso-remoto">
    1.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18-instalacion-del-cliente">
    1.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19-prueba-de-acceso-remoto">
    1.9 Prueba de acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#110-mejoras-de-sqlplus">
    1.10 Mejoras de sqlplus
  </a>
<nav aria-label="1.10 Mejoras de sqlplus" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1101">
    1.10.1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1102">
    1.10.2
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-postgresql">
    2. PostgreSQL
  </a>
<nav aria-label="2. PostgreSQL" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#21-instalacion-del-servidor">
    2.1 Instalación del servidor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22-acceso-local-privilegiado">
    2.2 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#23-creacion-de-la-base-de-datos">
    2.3 Creación de la base de datos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#24-creacion-de-tablas">
    2.4 Creación de tablas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#25-insercion-de-registros">
    2.5 Inserción de registros
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26-creacion-de-usuarios">
    2.6 Creación de usuarios
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#27-configuracion-del-acceso-remoto">
    2.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#28-instalacion-del-cliente">
    2.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#29-prueba-de-acceso-remoto">
    2.9 Prueba de acceso remoto
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-mariadb">
    3. MariaDB
  </a>
<nav aria-label="3. MariaDB" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#31-instalacion-del-servidor">
    3.1 Instalación del servidor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#32-acceso-local-privilegiado">
    3.2 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#33-creacion-de-la-base-de-datos">
    3.3 Creación de la base de datos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#34-creacion-de-tablas">
    3.4 Creación de tablas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#35-insercion-de-registros">
    3.5 Inserción de registros
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#36-creacion-de-usuarios">
    3.6 Creación de usuarios
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#37-configuracion-del-acceso-remoto">
    3.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#38-instalacion-del-cliente">
    3.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#39-prueba-de-acceso-remoto">
    3.9 Prueba de acceso remoto
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-mongodb">
    4. MongoDB
  </a>
<nav aria-label="4. MongoDB" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#41-instalacion-del-servidor">
    4.1 Instalación del servidor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#42-acceso-local-privilegiado">
    4.2 Acceso local privilegiado
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#43-creacion-de-la-base-de-datos">
    4.3 Creación de la base de datos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#44-creacion-de-colecciones">
    4.4 Creación de colecciones
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#45-insercion-de-documentos">
    4.5 Inserción de documentos
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#46-creacion-de-usuarios">
    4.6 Creación de usuarios
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#47-configuracion-del-acceso-remoto">
    4.7 Configuración del acceso remoto
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#48-instalacion-del-cliente">
    4.8 Instalación del cliente
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#49-prueba-de-acceso-remoto">
    4.9 Prueba de acceso remoto
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-app-flask-con-mongodb">
    5. App Flask con MongoDB
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/adriasir123/grupalesbdc/edit/master/docs/p1-servidores-clientes/ri/alumno1.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="alumno-1">Alumno 1</h1>
<h2 id="escenario">Escenario</h2>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>Vagrant.configure<span class="o">(</span><span class="s2">"2"</span><span class="o">)</span> <span class="k">do</span> <span class="p">|</span>config<span class="p">|</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>config.vm.synced_folder <span class="s2">"."</span>, <span class="s2">"/vagrant"</span>, disabled: <span class="nb">true</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>  config.vm.provider :libvirt <span class="k">do</span> <span class="p">|</span>libvirt<span class="p">|</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>    libvirt.cpus <span class="o">=</span> <span class="m">2</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>    libvirt.memory <span class="o">=</span> <span class="m">1024</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>  end
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>  config.vm.define :servidororacle <span class="k">do</span> <span class="p">|</span>servidororacle<span class="p">|</span>
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>    servidororacle.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>    servidororacle.vm.provider :libvirt <span class="k">do</span> <span class="p">|</span>servidororacle<span class="p">|</span>
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>      servidororacle.memory <span class="o">=</span> <span class="m">4096</span>
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>      servidororacle.cpus <span class="o">=</span> <span class="m">6</span>
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>    end
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a>    servidororacle.vm.hostname <span class="o">=</span> <span class="s2">"servidororacle"</span>
<a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a>    servidororacle.vm.network :private_network,
<a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-oracle"</span>,
<a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.0.2"</span>,
<a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a>  end
<a href="#__codelineno-0-24" id="__codelineno-0-24" name="__codelineno-0-24"></a>
<a href="#__codelineno-0-25" id="__codelineno-0-25" name="__codelineno-0-25"></a>  config.vm.define :clienteoracle <span class="k">do</span> <span class="p">|</span>clienteoracle<span class="p">|</span>
<a href="#__codelineno-0-26" id="__codelineno-0-26" name="__codelineno-0-26"></a>    clienteoracle.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-27" id="__codelineno-0-27" name="__codelineno-0-27"></a>    clienteoracle.vm.hostname <span class="o">=</span> <span class="s2">"clienteoracle"</span>
<a href="#__codelineno-0-28" id="__codelineno-0-28" name="__codelineno-0-28"></a>    clienteoracle.vm.network :private_network,
<a href="#__codelineno-0-29" id="__codelineno-0-29" name="__codelineno-0-29"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-oracle"</span>,
<a href="#__codelineno-0-30" id="__codelineno-0-30" name="__codelineno-0-30"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-31" id="__codelineno-0-31" name="__codelineno-0-31"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.0.3"</span>,
<a href="#__codelineno-0-32" id="__codelineno-0-32" name="__codelineno-0-32"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-33" id="__codelineno-0-33" name="__codelineno-0-33"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-34" id="__codelineno-0-34" name="__codelineno-0-34"></a>  end
<a href="#__codelineno-0-35" id="__codelineno-0-35" name="__codelineno-0-35"></a>
<a href="#__codelineno-0-36" id="__codelineno-0-36" name="__codelineno-0-36"></a>  config.vm.define :servidorpostgresql <span class="k">do</span> <span class="p">|</span>servidorpostgresql<span class="p">|</span>
<a href="#__codelineno-0-37" id="__codelineno-0-37" name="__codelineno-0-37"></a>    servidorpostgresql.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-38" id="__codelineno-0-38" name="__codelineno-0-38"></a>    servidorpostgresql.vm.hostname <span class="o">=</span> <span class="s2">"servidorpostgresql"</span>
<a href="#__codelineno-0-39" id="__codelineno-0-39" name="__codelineno-0-39"></a>    servidorpostgresql.vm.network :private_network,
<a href="#__codelineno-0-40" id="__codelineno-0-40" name="__codelineno-0-40"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-postgresql"</span>,
<a href="#__codelineno-0-41" id="__codelineno-0-41" name="__codelineno-0-41"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-42" id="__codelineno-0-42" name="__codelineno-0-42"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.1.2"</span>,
<a href="#__codelineno-0-43" id="__codelineno-0-43" name="__codelineno-0-43"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-44" id="__codelineno-0-44" name="__codelineno-0-44"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-45" id="__codelineno-0-45" name="__codelineno-0-45"></a>  end
<a href="#__codelineno-0-46" id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a href="#__codelineno-0-47" id="__codelineno-0-47" name="__codelineno-0-47"></a>  config.vm.define :clientepostgresql <span class="k">do</span> <span class="p">|</span>clientepostgresql<span class="p">|</span>
<a href="#__codelineno-0-48" id="__codelineno-0-48" name="__codelineno-0-48"></a>    clientepostgresql.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-49" id="__codelineno-0-49" name="__codelineno-0-49"></a>    clientepostgresql.vm.hostname <span class="o">=</span> <span class="s2">"clientepostgresql"</span>
<a href="#__codelineno-0-50" id="__codelineno-0-50" name="__codelineno-0-50"></a>    clientepostgresql.vm.network :private_network,
<a href="#__codelineno-0-51" id="__codelineno-0-51" name="__codelineno-0-51"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-postgresql"</span>,
<a href="#__codelineno-0-52" id="__codelineno-0-52" name="__codelineno-0-52"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-53" id="__codelineno-0-53" name="__codelineno-0-53"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.1.3"</span>,
<a href="#__codelineno-0-54" id="__codelineno-0-54" name="__codelineno-0-54"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-55" id="__codelineno-0-55" name="__codelineno-0-55"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-56" id="__codelineno-0-56" name="__codelineno-0-56"></a>  end
<a href="#__codelineno-0-57" id="__codelineno-0-57" name="__codelineno-0-57"></a>
<a href="#__codelineno-0-58" id="__codelineno-0-58" name="__codelineno-0-58"></a>  config.vm.define :servidormariadb <span class="k">do</span> <span class="p">|</span>servidormariadb<span class="p">|</span>
<a href="#__codelineno-0-59" id="__codelineno-0-59" name="__codelineno-0-59"></a>    servidormariadb.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-60" id="__codelineno-0-60" name="__codelineno-0-60"></a>    servidormariadb.vm.hostname <span class="o">=</span> <span class="s2">"servidormariadb"</span>
<a href="#__codelineno-0-61" id="__codelineno-0-61" name="__codelineno-0-61"></a>    servidormariadb.vm.network :private_network,
<a href="#__codelineno-0-62" id="__codelineno-0-62" name="__codelineno-0-62"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-mariadb"</span>,
<a href="#__codelineno-0-63" id="__codelineno-0-63" name="__codelineno-0-63"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-64" id="__codelineno-0-64" name="__codelineno-0-64"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.2.2"</span>,
<a href="#__codelineno-0-65" id="__codelineno-0-65" name="__codelineno-0-65"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-66" id="__codelineno-0-66" name="__codelineno-0-66"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-67" id="__codelineno-0-67" name="__codelineno-0-67"></a>  end
<a href="#__codelineno-0-68" id="__codelineno-0-68" name="__codelineno-0-68"></a>
<a href="#__codelineno-0-69" id="__codelineno-0-69" name="__codelineno-0-69"></a>  config.vm.define :clientemariadb <span class="k">do</span> <span class="p">|</span>clientemariadb<span class="p">|</span>
<a href="#__codelineno-0-70" id="__codelineno-0-70" name="__codelineno-0-70"></a>    clientemariadb.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-71" id="__codelineno-0-71" name="__codelineno-0-71"></a>    clientemariadb.vm.hostname <span class="o">=</span> <span class="s2">"clientemariadb"</span>
<a href="#__codelineno-0-72" id="__codelineno-0-72" name="__codelineno-0-72"></a>    clientemariadb.vm.network :private_network,
<a href="#__codelineno-0-73" id="__codelineno-0-73" name="__codelineno-0-73"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-mariadb"</span>,
<a href="#__codelineno-0-74" id="__codelineno-0-74" name="__codelineno-0-74"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-75" id="__codelineno-0-75" name="__codelineno-0-75"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.2.3"</span>,
<a href="#__codelineno-0-76" id="__codelineno-0-76" name="__codelineno-0-76"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-77" id="__codelineno-0-77" name="__codelineno-0-77"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-78" id="__codelineno-0-78" name="__codelineno-0-78"></a>  end
<a href="#__codelineno-0-79" id="__codelineno-0-79" name="__codelineno-0-79"></a>
<a href="#__codelineno-0-80" id="__codelineno-0-80" name="__codelineno-0-80"></a>  config.vm.define :servidormongodb <span class="k">do</span> <span class="p">|</span>servidormongodb<span class="p">|</span>
<a href="#__codelineno-0-81" id="__codelineno-0-81" name="__codelineno-0-81"></a>    servidormongodb.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-82" id="__codelineno-0-82" name="__codelineno-0-82"></a>    servidormongodb.vm.hostname <span class="o">=</span> <span class="s2">"servidormongodb"</span>
<a href="#__codelineno-0-83" id="__codelineno-0-83" name="__codelineno-0-83"></a>    servidormongodb.vm.network :private_network,
<a href="#__codelineno-0-84" id="__codelineno-0-84" name="__codelineno-0-84"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-mongodb"</span>,
<a href="#__codelineno-0-85" id="__codelineno-0-85" name="__codelineno-0-85"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-86" id="__codelineno-0-86" name="__codelineno-0-86"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.3.2"</span>,
<a href="#__codelineno-0-87" id="__codelineno-0-87" name="__codelineno-0-87"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-88" id="__codelineno-0-88" name="__codelineno-0-88"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-89" id="__codelineno-0-89" name="__codelineno-0-89"></a>  end
<a href="#__codelineno-0-90" id="__codelineno-0-90" name="__codelineno-0-90"></a>
<a href="#__codelineno-0-91" id="__codelineno-0-91" name="__codelineno-0-91"></a>  config.vm.define :clientemongodb <span class="k">do</span> <span class="p">|</span>clientemongodb<span class="p">|</span>
<a href="#__codelineno-0-92" id="__codelineno-0-92" name="__codelineno-0-92"></a>    clientemongodb.vm.box <span class="o">=</span> <span class="s2">"debian/bullseye64"</span>
<a href="#__codelineno-0-93" id="__codelineno-0-93" name="__codelineno-0-93"></a>    clientemongodb.vm.hostname <span class="o">=</span> <span class="s2">"clientemongodb"</span>
<a href="#__codelineno-0-94" id="__codelineno-0-94" name="__codelineno-0-94"></a>    clientemongodb.vm.network :private_network,
<a href="#__codelineno-0-95" id="__codelineno-0-95" name="__codelineno-0-95"></a>      :libvirt__network_name <span class="o">=</span>&gt; <span class="s2">"red-mongodb"</span>,
<a href="#__codelineno-0-96" id="__codelineno-0-96" name="__codelineno-0-96"></a>      :libvirt__dhcp_enabled <span class="o">=</span>&gt; false,
<a href="#__codelineno-0-97" id="__codelineno-0-97" name="__codelineno-0-97"></a>      :ip <span class="o">=</span>&gt; <span class="s2">"10.0.3.3"</span>,
<a href="#__codelineno-0-98" id="__codelineno-0-98" name="__codelineno-0-98"></a>      :libvirt__netmask <span class="o">=</span>&gt; <span class="s1">'255.255.255.0'</span>,
<a href="#__codelineno-0-99" id="__codelineno-0-99" name="__codelineno-0-99"></a>      :libvirt__forward_mode <span class="o">=</span>&gt; <span class="s2">"veryisolated"</span>
<a href="#__codelineno-0-100" id="__codelineno-0-100" name="__codelineno-0-100"></a>  end
<a href="#__codelineno-0-101" id="__codelineno-0-101" name="__codelineno-0-101"></a>
<a href="#__codelineno-0-102" id="__codelineno-0-102" name="__codelineno-0-102"></a>end
</code></pre></div>
<h2 id="1-oracle-19c">1. Oracle 19c</h2>
<h3 id="11-redimension-de-disco">1.1 Redimensión de disco</h3>
<blockquote>
<p>Tenemos que tener suficiente espacio para instalar Oracle</p>
</blockquote>
<p>Paro la VM:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>vagrant halt servidororacle
</code></pre></div>
<p>Redimensiono el fichero de disco:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>virsh -c qemu:///system vol-resize p1-bd-alumno1_servidororacle.img 50G --pool default
</code></pre></div>
<p>Dentro de la VM redimensiono la partición y el sistema de ficheros:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="nb">echo</span> <span class="s2">", +"</span> <span class="p">|</span> sudo sfdisk -N <span class="m">1</span> /dev/vda --no-reread
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>sudo apt update
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>sudo apt install parted
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>sudo partprobe
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>sudo resize2fs /dev/vda1
</code></pre></div>
<h3 id="12-instalacion-del-servidor">1.2 Instalación del servidor</h3>
<h4 id="121">1.2.1</h4>
<p>Descargo el rpm en mi host desde la página oficial de Oracle:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://i.imgur.com/b7LjTs5.png"><img alt="descargarpm" src="https://i.imgur.com/b7LjTs5.png"/></a></p>
<h4 id="122">1.2.2</h4>
<p>Lo paso a la VM <code>servidororacle</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>scp Downloads/oracle-database-ee-19c-1.0-1.x86_64.rpm vagrant@192.168.121.159:/home/vagrant
</code></pre></div>
<h4 id="123">1.2.3</h4>
<p>Instalo los paquetes requeridos:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>sudo apt install alien libaio1 unixodbc net-tools
</code></pre></div>
<h4 id="124">1.2.4</h4>
<p>Convierto el rpm a deb:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>sudo alien --scripts -d oracle-database-ee-19c-1.0-1.x86_64.rpm
</code></pre></div>
<p>Como resultado tendremos el paquete <code>oracle-database-ee-19c_1.0-2_amd64.deb</code></p>
<h4 id="125">1.2.5</h4>
<p>Creo el siguiente script:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>sudo pico /sbin/chkconfig
</code></pre></div>
<p>Con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="ch">#!/bin/bash</span>
<a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="c1"># Oracle 19c installer chkconfig hack</span>
<a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="nv">file</span><span class="o">=</span>/etc/init.d/oracle-19c
<a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="k">if</span> <span class="o">[[</span> ! <span class="sb">`</span>tail -n1 <span class="nv">$file</span> <span class="p">|</span> grep INIT<span class="sb">`</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="nb">echo</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="nb">echo</span> <span class="s1">'### BEGIN INIT INFO'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="nb">echo</span> <span class="s1">'# Provides: Oracle 19c'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="nb">echo</span> <span class="s1">'# Required-Start: $remote_fs $syslog'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="nb">echo</span> <span class="s1">'# Required-Stop: $remote_fs $syslog'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="nb">echo</span> <span class="s1">'# Default-Start: 2 3 4 5'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="nb">echo</span> <span class="s1">'# Default-Stop: 0 1 6'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="nb">echo</span> <span class="s1">'# Short-Description: Oracle 19c'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="nb">echo</span> <span class="s1">'### END INIT INFO'</span> &gt;&gt; <span class="nv">$file</span>
<a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="k">fi</span>
<a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a>update-rc.d oracle-19c defaults <span class="m">80</span> <span class="m">01</span>
</code></pre></div>
<p>Le doy permisos:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>sudo chmod <span class="m">777</span> /sbin/chkconfig  
</code></pre></div>
<h4 id="126">1.2.6</h4>
<p>Creo el siguiente fichero para los parámetros de Kernel de Oracle:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>sudo touch /etc/sysctl.d/60-oracle.conf
</code></pre></div>
<p>Con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="c1"># Oracle 19c kernel parameters</span>
<a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>fs.file-max<span class="o">=</span><span class="m">6815744</span>
<a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>net.ipv4.ip_local_port_range<span class="o">=</span><span class="m">9000</span> <span class="m">65000</span>
<a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>kernel.sem<span class="o">=</span><span class="m">250</span> <span class="m">32000</span> <span class="m">100</span> <span class="m">128</span>
<a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>kernel.shmmax<span class="o">=</span><span class="m">536870912</span>
</code></pre></div>
<h4 id="127">1.2.7</h4>
<p>Arranco el siguiente servicio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>sudo systemctl start procps
</code></pre></div>
<h4 id="128">1.2.8</h4>
<p>Creo el siguiente fichero para configurar el punto de montaje <code>/dev/shm</code> de Oracle:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>sudo touch /etc/rc2.d/S01shm_load
</code></pre></div>
<p>Con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="ch">#!/bin/sh</span>
<a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in</span>
<a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>start<span class="o">)</span> mkdir /var/lock/subsys <span class="m">2</span>&gt;/dev/null
<a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>       touch /var/lock/subsys/listener
<a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>       rm /dev/shm <span class="m">2</span>&gt;/dev/null
<a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>       mkdir /dev/shm <span class="m">2</span>&gt;/dev/null
<a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>       mount -t tmpfs shmfs -o <span class="nv">size</span><span class="o">=</span>2048m /dev/shm <span class="p">;;</span>
<a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>*<span class="o">)</span> <span class="nb">echo</span> error
<a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a>   <span class="nb">exit</span> <span class="m">1</span> <span class="p">;;</span>
<a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="k">esac</span>
</code></pre></div>
<p>Le doy permisos:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>sudo chmod <span class="m">777</span> /etc/rc2.d/S01shm_load
</code></pre></div>
<p>Hago un reinicio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a>sudo reboot
</code></pre></div>
<h4 id="129">1.2.9</h4>
<p>Instalo el paquete:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>sudo dpkg --install oracle-database-ee-19c_1.0-2_amd64.deb
</code></pre></div>
<h4 id="1210">1.2.10</h4>
<p>Añado el parámetro <code>-J-Doracle.assistants.dbca.validate.ConfigurationParams=false</code> al final de la siguiente línea en <code>/etc/init.d/oracledb_ORCLCDB-19c</code>:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://i.postimg.cc/GpqQmxHm/parametroracle.png"><img alt="parametroañadido" src="https://i.postimg.cc/GpqQmxHm/parametroracle.png"/></a></p>
<p>Quedaría de la siguiente manera la línea al modificarla:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="nv">$SU</span> -s /bin/bash  <span class="nv">$ORACLE_OWNER</span> -c <span class="s2">"</span><span class="nv">$DBCA</span><span class="s2"> -silent -createDatabase -gdbName </span><span class="nv">$ORACLE_SID</span><span class="s2"> -templateName </span><span class="nv">$TEMPLATE_NAME</span><span class="s2"> -characterSet </span><span class="nv">$CHARSET</span><span class="s2"> -createAsContainerDatabase </span><span class="nv">$CREATE_AS_CDB</span><span class="s2"> -numberOfPDBs </span><span class="nv">$NUMBER_OF_PDBS</span><span class="s2"> -pdbName </span><span class="nv">$PDB_NAME</span><span class="s2"> -createListener </span><span class="nv">$LISTENER_NAME</span><span class="s2">:</span><span class="nv">$LISTENER_PORT</span><span class="s2"> -datafileDestination </span><span class="nv">$ORACLE_DATA_LOCATION</span><span class="s2"> -sid </span><span class="nv">$ORACLE_SID</span><span class="s2"> -autoGeneratePasswords -emConfiguration DBEXPRESS -emExpressPort </span><span class="nv">$EM_EXPRESS_PORT</span><span class="s2"> -J-Doracle.assistants.dbca.validate.ConfigurationParams=false"</span>
</code></pre></div>
<h4 id="1211">1.2.11</h4>
<p>Añado la siguiente línea a <code>/etc/hosts</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="m">192</span>.168.121.159 servidororacle servidororacle
</code></pre></div>
<h4 id="1212">1.2.12</h4>
<p>Ejecuto el script de configuración de Oracle:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a>sudo /etc/init.d/oracledb_ORCLCDB-19c configure
</code></pre></div>
<h4 id="1213">1.2.13</h4>
<p>Edito el siguiente fichero:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a>pico ~/.bashrc
</code></pre></div>
<p>Añado las siguientes variables de entorno al final del fichero:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="c1"># Oracle environment variables</span>
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="nb">export</span> <span class="nv">ORACLE_HOME</span><span class="o">=</span>/opt/oracle/product/19c/dbhome_1
<a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="nb">export</span> <span class="nv">ORACLE_SID</span><span class="o">=</span>ORCLCDB
<a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="nb">export</span> <span class="nv">NLS_LANG</span><span class="o">=</span><span class="sb">`</span><span class="nv">$ORACLE_HOME</span>/bin/nls_lang.sh<span class="sb">`</span>
<a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="nb">export</span> <span class="nv">ORACLE_BASE</span><span class="o">=</span>/opt/oracle
<a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$ORACLE_HOME</span>/lib:<span class="nv">$LD_LIBRARY_PATH</span>
<a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$ORACLE_HOME</span>/bin:<span class="nv">$PATH</span>
</code></pre></div>
<p>Aplico los cambios:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>. ~/.profile
</code></pre></div>
<p>Hago un reinicio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a>sudo reboot
</code></pre></div>
<h4 id="1214">1.2.14</h4>
<p>Inicio el servicio de Oracle:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a>sudo systemctl start oracledb_ORCLCDB-19c
</code></pre></div>
<h4 id="1215">1.2.15</h4>
<p>Añado la contraseña <code>oracle</code> al usuario <code>oracle</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a>sudo passwd oracle
</code></pre></div>
<p>Cambio su shell:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a>sudo usermod --shell /bin/bash oracle
</code></pre></div>
<p>Creo su home:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a>sudo mkdir /home/oracle
</code></pre></div>
<p>Cambio los propietarios:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a>sudo chown -R oracle:oinstall /home/oracle
</code></pre></div>
<p>Añado el siguiente fichero:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a>touch ~/.profile
</code></pre></div>
<p>Con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="c1"># ~/.profile: executed by the command interpreter for login shells.</span>
<a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="c1"># This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login</span>
<a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="c1"># exists.</span>
<a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="c1"># see /usr/share/doc/bash/examples/startup-files for examples.</span>
<a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="c1"># the files are located in the bash-doc package.</span>
<a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a>
<a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="c1"># the default umask is set in /etc/profile; for setting the umask</span>
<a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="c1"># for ssh logins, install and configure the libpam-umask package.</span>
<a href="#__codelineno-31-9" id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="c1">#umask 022</span>
<a href="#__codelineno-31-10" id="__codelineno-31-10" name="__codelineno-31-10"></a>
<a href="#__codelineno-31-11" id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="c1"># if running bash</span>
<a href="#__codelineno-31-12" id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="k">if</span> <span class="o">[</span> -n <span class="s2">"</span><span class="nv">$BASH_VERSION</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<a href="#__codelineno-31-13" id="__codelineno-31-13" name="__codelineno-31-13"></a>    <span class="c1"># include .bashrc if it exists</span>
<a href="#__codelineno-31-14" id="__codelineno-31-14" name="__codelineno-31-14"></a>    <span class="k">if</span> <span class="o">[</span> -f <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.bashrc"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<a href="#__codelineno-31-15" id="__codelineno-31-15" name="__codelineno-31-15"></a>    . <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.bashrc"</span>
<a href="#__codelineno-31-16" id="__codelineno-31-16" name="__codelineno-31-16"></a>    <span class="k">fi</span>
<a href="#__codelineno-31-17" id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="k">fi</span>
<a href="#__codelineno-31-18" id="__codelineno-31-18" name="__codelineno-31-18"></a>
<a href="#__codelineno-31-19" id="__codelineno-31-19" name="__codelineno-31-19"></a><span class="c1"># set PATH so it includes user's private bin if it exists</span>
<a href="#__codelineno-31-20" id="__codelineno-31-20" name="__codelineno-31-20"></a><span class="k">if</span> <span class="o">[</span> -d <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/bin"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
<a href="#__codelineno-31-21" id="__codelineno-31-21" name="__codelineno-31-21"></a>    <span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
<a href="#__codelineno-31-22" id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="k">fi</span>
<a href="#__codelineno-31-23" id="__codelineno-31-23" name="__codelineno-31-23"></a>
<a href="#__codelineno-31-24" id="__codelineno-31-24" name="__codelineno-31-24"></a><span class="c1"># set PATH so it includes user's private bin if it exists</span>
<a href="#__codelineno-31-25" id="__codelineno-31-25" name="__codelineno-31-25"></a><span class="k">if</span> <span class="o">[</span> -d <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.local/bin"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
<a href="#__codelineno-31-26" id="__codelineno-31-26" name="__codelineno-31-26"></a>    <span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.local/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
<a href="#__codelineno-31-27" id="__codelineno-31-27" name="__codelineno-31-27"></a><span class="k">fi</span>
</code></pre></div>
<p>Le añado a este usuario también las variables de entorno:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a>pico ~/.bashrc
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="c1"># Oracle environment variables</span>
<a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="nb">export</span> <span class="nv">ORACLE_HOME</span><span class="o">=</span>/opt/oracle/product/19c/dbhome_1
<a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="nb">export</span> <span class="nv">ORACLE_SID</span><span class="o">=</span>ORCLCDB
<a href="#__codelineno-33-4" id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="nb">export</span> <span class="nv">NLS_LANG</span><span class="o">=</span><span class="sb">`</span><span class="nv">$ORACLE_HOME</span>/bin/nls_lang.sh<span class="sb">`</span>
<a href="#__codelineno-33-5" id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="nb">export</span> <span class="nv">ORACLE_BASE</span><span class="o">=</span>/opt/oracle
<a href="#__codelineno-33-6" id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$ORACLE_HOME</span>/lib:<span class="nv">$LD_LIBRARY_PATH</span>
<a href="#__codelineno-33-7" id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$ORACLE_HOME</span>/bin:<span class="nv">$PATH</span>
</code></pre></div>
<p>Aplico los cambios:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a>. ~/.profile
</code></pre></div>
<p>Le hago admin:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a>sudo usermod -aG sudo oracle
</code></pre></div>
<p>A partir de ahora, para controlar Oracle correctamente, tendremos que estar logeados siempre con este usuario.</p>
<h4 id="1216">1.2.16</h4>
<p>Añado el usuario <code>vagrant</code> al grupo <code>dba</code> por si en algún momento quiero acceder a sqlplus de manera rápida:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a>sudo usermod -a -G dba vagrant
</code></pre></div>
<h3 id="13-acceso-local-privilegiado">1.3 Acceso local privilegiado</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a>oracle@servidororacle:~$ sqlplus / as sysdba
<a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a>
<a href="#__codelineno-37-3" id="__codelineno-37-3" name="__codelineno-37-3"></a>SQL*Plus: Release <span class="m">19</span>.0.0.0.0 - Production on Fri Oct <span class="m">28</span> <span class="m">14</span>:13:53 <span class="m">2022</span>
<a href="#__codelineno-37-4" id="__codelineno-37-4" name="__codelineno-37-4"></a>Version <span class="m">19</span>.3.0.0.0
<a href="#__codelineno-37-5" id="__codelineno-37-5" name="__codelineno-37-5"></a>
<a href="#__codelineno-37-6" id="__codelineno-37-6" name="__codelineno-37-6"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">1982</span>, <span class="m">2019</span>, Oracle.  All rights reserved.
<a href="#__codelineno-37-7" id="__codelineno-37-7" name="__codelineno-37-7"></a>
<a href="#__codelineno-37-8" id="__codelineno-37-8" name="__codelineno-37-8"></a>
<a href="#__codelineno-37-9" id="__codelineno-37-9" name="__codelineno-37-9"></a>Connected to:
<a href="#__codelineno-37-10" id="__codelineno-37-10" name="__codelineno-37-10"></a>Oracle Database 19c Enterprise Edition Release <span class="m">19</span>.0.0.0.0 - Production
<a href="#__codelineno-37-11" id="__codelineno-37-11" name="__codelineno-37-11"></a>Version <span class="m">19</span>.3.0.0.0
<a href="#__codelineno-37-12" id="__codelineno-37-12" name="__codelineno-37-12"></a>
<a href="#__codelineno-37-13" id="__codelineno-37-13" name="__codelineno-37-13"></a>SELECT banner FROM v<span class="nv">$version</span><span class="p">;</span>
<a href="#__codelineno-37-14" id="__codelineno-37-14" name="__codelineno-37-14"></a>
<a href="#__codelineno-37-15" id="__codelineno-37-15" name="__codelineno-37-15"></a>BANNER
<a href="#__codelineno-37-16" id="__codelineno-37-16" name="__codelineno-37-16"></a>--------------------------------------------------------------------------------
<a href="#__codelineno-37-17" id="__codelineno-37-17" name="__codelineno-37-17"></a>Oracle Database 19c Enterprise Edition Release <span class="m">19</span>.0.0.0.0 - Production
</code></pre></div>
<p>Cuando en futuras ocasiones al conectarnos a Oracle nos aparezca el mensaje <code>Connected to an idle instance</code>, tenemos que ejecutar en <code>sqlplus</code> el comando <code>startup</code>.</p>
<h3 id="14-creacion-de-usuario">1.4 Creación de usuario</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a>alter session <span class="nb">set</span> <span class="s2">"_ORACLE_SCRIPT"</span><span class="o">=</span>true<span class="p">;</span>
<a href="#__codelineno-38-2" id="__codelineno-38-2" name="__codelineno-38-2"></a>create user bibliofilos_admin identified by <span class="m">1234</span><span class="p">;</span>
<a href="#__codelineno-38-3" id="__codelineno-38-3" name="__codelineno-38-3"></a>grant all privileges to bibliofilos_admin<span class="p">;</span>
</code></pre></div>
<p>Pruebo que funciona el acceso:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a>oracle@servidororacle:~$ sqlplus bibliofilos_admin/1234
<a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a>
<a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a>SQL*Plus: Release <span class="m">19</span>.0.0.0.0 - Production on Fri Oct <span class="m">28</span> <span class="m">14</span>:18:26 <span class="m">2022</span>
<a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a>Version <span class="m">19</span>.3.0.0.0
<a href="#__codelineno-39-5" id="__codelineno-39-5" name="__codelineno-39-5"></a>
<a href="#__codelineno-39-6" id="__codelineno-39-6" name="__codelineno-39-6"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">1982</span>, <span class="m">2019</span>, Oracle.  All rights reserved.
<a href="#__codelineno-39-7" id="__codelineno-39-7" name="__codelineno-39-7"></a>
<a href="#__codelineno-39-8" id="__codelineno-39-8" name="__codelineno-39-8"></a>Last Successful login time: Fri Oct <span class="m">28</span> <span class="m">2022</span> <span class="m">13</span>:52:49 +00:00
<a href="#__codelineno-39-9" id="__codelineno-39-9" name="__codelineno-39-9"></a>
<a href="#__codelineno-39-10" id="__codelineno-39-10" name="__codelineno-39-10"></a>Connected to:
<a href="#__codelineno-39-11" id="__codelineno-39-11" name="__codelineno-39-11"></a>Oracle Database 19c Enterprise Edition Release <span class="m">19</span>.0.0.0.0 - Production
<a href="#__codelineno-39-12" id="__codelineno-39-12" name="__codelineno-39-12"></a>Version <span class="m">19</span>.3.0.0.0
<a href="#__codelineno-39-13" id="__codelineno-39-13" name="__codelineno-39-13"></a>
<a href="#__codelineno-39-14" id="__codelineno-39-14" name="__codelineno-39-14"></a>SQL&gt;
</code></pre></div>
<p>Pruebo que los privilegios se han aplicado correctamente con la siguiente consulta:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">select</span> * from dba_sys_privs where <span class="nv">grantee</span> <span class="o">=</span> <span class="s1">'BIBLIOFILOS_ADMIN'</span><span class="p">;</span>
</code></pre></div>
<p>El output de esta consulta es demasiado largo, así que <a href="https://gist.github.com/adriasir123/5cd2ec8d56974b6ae0d283243f6d5f41">entra en este gist</a> para verlo.</p>
<h3 id="15-creacion-de-tablas">1.5 Creación de tablas</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">  </span><span class="n">ciudad</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">  </span><span class="n">calle</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-5" id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">bibliotecas_pk</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-41-6" id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-41-7" id="__codelineno-41-7" name="__codelineno-41-7"></a>
<a href="#__codelineno-41-8" id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">libros</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-41-9" id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-10" id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="w">  </span><span class="n">id_biblioteca</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-11" id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="w">  </span><span class="n">n_paginas</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-12" id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="w">  </span><span class="n">autor</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-13" id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">libros_pk</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"></span>
<a href="#__codelineno-41-14" id="__codelineno-41-14" name="__codelineno-41-14"></a><span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">id_biblioteca_fk_libros</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-41-15" id="__codelineno-41-15" name="__codelineno-41-15"></a><span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-41-16" id="__codelineno-41-16" name="__codelineno-41-16"></a><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-41-17" id="__codelineno-41-17" name="__codelineno-41-17"></a>
<a href="#__codelineno-41-18" id="__codelineno-41-18" name="__codelineno-41-18"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-41-19" id="__codelineno-41-19" name="__codelineno-41-19"></a><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-20" id="__codelineno-41-20" name="__codelineno-41-20"></a><span class="w">  </span><span class="n">id_biblioteca</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-21" id="__codelineno-41-21" name="__codelineno-41-21"></a><span class="w">  </span><span class="n">nombre</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-22" id="__codelineno-41-22" name="__codelineno-41-22"></a><span class="w">  </span><span class="n">apellido</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-41-23" id="__codelineno-41-23" name="__codelineno-41-23"></a><span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">trabajadores_pk</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"></span>
<a href="#__codelineno-41-24" id="__codelineno-41-24" name="__codelineno-41-24"></a><span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">id_biblioteca_fk_trabajadores</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-41-25" id="__codelineno-41-25" name="__codelineno-41-25"></a><span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-41-26" id="__codelineno-41-26" name="__codelineno-41-26"></a><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han creado con la siguiente consulta:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="k">SELECT</span><span class="w"></span>
<a href="#__codelineno-42-2" id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="w">  </span><span class="k">table_name</span><span class="p">,</span><span class="w"> </span><span class="k">owner</span><span class="w"></span>
<a href="#__codelineno-42-3" id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="k">FROM</span><span class="w"></span>
<a href="#__codelineno-42-4" id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">  </span><span class="n">all_tables</span><span class="w"></span>
<a href="#__codelineno-42-5" id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="k">WHERE</span><span class="w"></span>
<a href="#__codelineno-42-6" id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">  </span><span class="k">owner</span><span class="o">=</span><span class="s1">'BIBLIOFILOS_ADMIN'</span><span class="w"></span>
<a href="#__codelineno-42-7" id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"></span>
<a href="#__codelineno-42-8" id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="w">  </span><span class="k">owner</span><span class="p">,</span><span class="w"> </span><span class="k">table_name</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Devuelve lo siguiente:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a>TABLE_NAME                                                                                                                                               OWNER
<a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a>-------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------
<a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a>BIBLIOTECAS                                                                                                                                              BIBLIOFILOS_ADMIN
<a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a>LIBROS                                                                                                                                                       BIBLIOFILOS_ADMIN
<a href="#__codelineno-43-5" id="__codelineno-43-5" name="__codelineno-43-5"></a>TRABAJADORES                                                                                                                                                 BIBLIOFILOS_ADMIN
</code></pre></div>
<h3 id="16-insercion-de-registros">1.6 Inserción de registros</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'Utrera'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Alvarez Quintero'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-44-2" id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Dos Hermanas'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Plaza Huerta Palacios'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-44-3" id="__codelineno-44-3" name="__codelineno-44-3"></a>
<a href="#__codelineno-44-4" id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">libros</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="s1">'Dale Carnegie'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-44-5" id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">libros</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">714</span><span class="p">,</span><span class="w"> </span><span class="s1">'Anne Frank'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-44-6" id="__codelineno-44-6" name="__codelineno-44-6"></a>
<a href="#__codelineno-44-7" id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'Pepe'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Pepito'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-44-8" id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Jose'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Joselito'</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han añadido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">bibliotecas</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-45-2" id="__codelineno-45-2" name="__codelineno-45-2"></a>
<a href="#__codelineno-45-3" id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="w">    </span><span class="n">ID</span><span class="w"> </span><span class="n">CIUDAD</span><span class="w">                                                 </span><span class="n">CALLE</span><span class="w"></span>
<a href="#__codelineno-45-4" id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="c1">---------- -------------------------------------------------- --------------------------------------------------</span>
<a href="#__codelineno-45-5" id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="n">Utrera</span><span class="w">                                                 </span><span class="n">Alvarez</span><span class="w"> </span><span class="n">Quintero</span><span class="w"></span>
<a href="#__codelineno-45-6" id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="w">     </span><span class="mi">2</span><span class="w"> </span><span class="n">Dos</span><span class="w"> </span><span class="n">Hermanas</span><span class="w">                                       </span><span class="n">Plaza</span><span class="w"> </span><span class="n">Huerta</span><span class="w"> </span><span class="n">Palacios</span><span class="w"></span>
<a href="#__codelineno-45-7" id="__codelineno-45-7" name="__codelineno-45-7"></a>
<a href="#__codelineno-45-8" id="__codelineno-45-8" name="__codelineno-45-8"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">libros</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-45-9" id="__codelineno-45-9" name="__codelineno-45-9"></a>
<a href="#__codelineno-45-10" id="__codelineno-45-10" name="__codelineno-45-10"></a><span class="w">    </span><span class="n">ID</span><span class="w"> </span><span class="n">ID_BIBLIOTECA</span><span class="w">  </span><span class="n">N_PAGINAS</span><span class="w"> </span><span class="n">AUTOR</span><span class="w"></span>
<a href="#__codelineno-45-11" id="__codelineno-45-11" name="__codelineno-45-11"></a><span class="c1">---------- ------------- ---------- --------------------------------------------------</span>
<a href="#__codelineno-45-12" id="__codelineno-45-12" name="__codelineno-45-12"></a><span class="w">     </span><span class="mi">1</span><span class="w">         </span><span class="mi">1</span><span class="w">    </span><span class="mi">320</span><span class="w"> </span><span class="n">Dale</span><span class="w"> </span><span class="n">Carnegie</span><span class="w"></span>
<a href="#__codelineno-45-13" id="__codelineno-45-13" name="__codelineno-45-13"></a><span class="w">     </span><span class="mi">2</span><span class="w">         </span><span class="mi">2</span><span class="w">    </span><span class="mi">714</span><span class="w"> </span><span class="n">Anne</span><span class="w"> </span><span class="n">Frank</span><span class="w"></span>
<a href="#__codelineno-45-14" id="__codelineno-45-14" name="__codelineno-45-14"></a>
<a href="#__codelineno-45-15" id="__codelineno-45-15" name="__codelineno-45-15"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">trabajadores</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-45-16" id="__codelineno-45-16" name="__codelineno-45-16"></a>
<a href="#__codelineno-45-17" id="__codelineno-45-17" name="__codelineno-45-17"></a><span class="w">    </span><span class="n">ID</span><span class="w"> </span><span class="n">ID_BIBLIOTECA</span><span class="w"> </span><span class="n">NOMBRE</span><span class="w">                                                 </span><span class="n">APELLIDO</span><span class="w"></span>
<a href="#__codelineno-45-18" id="__codelineno-45-18" name="__codelineno-45-18"></a><span class="c1">---------- ------------- -------------------------------------------------- --------------------------------------------------</span>
<a href="#__codelineno-45-19" id="__codelineno-45-19" name="__codelineno-45-19"></a><span class="w">     </span><span class="mi">1</span><span class="w">         </span><span class="mi">1</span><span class="w"> </span><span class="n">Pepe</span><span class="w">                                                       </span><span class="n">Pepito</span><span class="w"></span>
<a href="#__codelineno-45-20" id="__codelineno-45-20" name="__codelineno-45-20"></a><span class="w">     </span><span class="mi">2</span><span class="w">         </span><span class="mi">2</span><span class="w"> </span><span class="n">Jose</span><span class="w">                                                       </span><span class="n">Joselito</span><span class="w"></span>
</code></pre></div>
<h3 id="17-configuracion-del-acceso-remoto">1.7 Configuración del acceso remoto</h3>
<p>Dejo <code>/opt/oracle/product/19c/dbhome_1/network/admin/listener.ora</code> de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="c1"># listener.ora Network Configuration File: /opt/oracle/product/19c/dbhome_1/network/admin/listener.ora</span>
<a href="#__codelineno-46-2" id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="c1"># Generated by Oracle configuration tools.</span>
<a href="#__codelineno-46-3" id="__codelineno-46-3" name="__codelineno-46-3"></a>
<a href="#__codelineno-46-4" id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="nv">LISTENER</span> <span class="o">=</span>
<a href="#__codelineno-46-5" id="__codelineno-46-5" name="__codelineno-46-5"></a>  <span class="o">(</span><span class="nv">DESCRIPTION_LIST</span> <span class="o">=</span>
<a href="#__codelineno-46-6" id="__codelineno-46-6" name="__codelineno-46-6"></a>    <span class="o">(</span><span class="nv">DESCRIPTION</span> <span class="o">=</span>
<a href="#__codelineno-46-7" id="__codelineno-46-7" name="__codelineno-46-7"></a>      <span class="o">(</span><span class="nv">ADDRESS</span> <span class="o">=</span> <span class="o">(</span><span class="nv">PROTOCOL</span> <span class="o">=</span> TCP<span class="o">)(</span><span class="nv">HOST</span> <span class="o">=</span> <span class="m">0</span>.0.0.0<span class="o">)(</span><span class="nv">PORT</span> <span class="o">=</span> <span class="m">1521</span><span class="o">))</span>
<a href="#__codelineno-46-8" id="__codelineno-46-8" name="__codelineno-46-8"></a>      <span class="o">(</span><span class="nv">ADDRESS</span> <span class="o">=</span> <span class="o">(</span><span class="nv">PROTOCOL</span> <span class="o">=</span> IPC<span class="o">)(</span><span class="nv">KEY</span> <span class="o">=</span> EXTPROC1521<span class="o">))</span>
<a href="#__codelineno-46-9" id="__codelineno-46-9" name="__codelineno-46-9"></a>    <span class="o">)</span>
<a href="#__codelineno-46-10" id="__codelineno-46-10" name="__codelineno-46-10"></a>  <span class="o">)</span>
<a href="#__codelineno-46-11" id="__codelineno-46-11" name="__codelineno-46-11"></a>
<a href="#__codelineno-46-12" id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="nv">SID_LIST_LISTENER</span> <span class="o">=</span>
<a href="#__codelineno-46-13" id="__codelineno-46-13" name="__codelineno-46-13"></a>  <span class="o">(</span><span class="nv">SID_LIST</span> <span class="o">=</span>
<a href="#__codelineno-46-14" id="__codelineno-46-14" name="__codelineno-46-14"></a>    <span class="o">(</span><span class="nv">SID_DESC</span> <span class="o">=</span>
<a href="#__codelineno-46-15" id="__codelineno-46-15" name="__codelineno-46-15"></a>      <span class="o">(</span><span class="nv">GLOBAL_DBNAME</span> <span class="o">=</span> ORCLCDB<span class="o">)</span>
<a href="#__codelineno-46-16" id="__codelineno-46-16" name="__codelineno-46-16"></a>      <span class="o">(</span><span class="nv">ORACLE_HOME</span> <span class="o">=</span> /opt/oracle/product/19c/dbhome_1<span class="o">)</span>
<a href="#__codelineno-46-17" id="__codelineno-46-17" name="__codelineno-46-17"></a>      <span class="o">(</span><span class="nv">SID_NAME</span> <span class="o">=</span> ORCLCDB<span class="o">)</span>
<a href="#__codelineno-46-18" id="__codelineno-46-18" name="__codelineno-46-18"></a>    <span class="o">)</span>
<a href="#__codelineno-46-19" id="__codelineno-46-19" name="__codelineno-46-19"></a>  <span class="o">)</span>
</code></pre></div>
<p>Dejo <code>/opt/oracle/product/19c/dbhome_1/network/admin/tnsnames.ora</code> de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="c1"># tnsnames.ora Network Configuration File: /opt/oracle/product/19c/dbhome_1/network/admin/tnsnames.ora</span>
<a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="c1"># Generated by Oracle configuration tools.</span>
<a href="#__codelineno-47-3" id="__codelineno-47-3" name="__codelineno-47-3"></a>
<a href="#__codelineno-47-4" id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="nv">ORCLCDB</span><span class="o">=</span>
<a href="#__codelineno-47-5" id="__codelineno-47-5" name="__codelineno-47-5"></a>  <span class="o">(</span><span class="nv">DESCRIPTION</span> <span class="o">=</span>
<a href="#__codelineno-47-6" id="__codelineno-47-6" name="__codelineno-47-6"></a>    <span class="o">(</span><span class="nv">ADDRESS_LIST</span> <span class="o">=</span>
<a href="#__codelineno-47-7" id="__codelineno-47-7" name="__codelineno-47-7"></a>      <span class="o">(</span><span class="nv">ADDRESS</span> <span class="o">=</span> <span class="o">(</span><span class="nv">PROTOCOL</span> <span class="o">=</span> TCP<span class="o">)(</span><span class="nv">HOST</span> <span class="o">=</span> servidororacle<span class="o">)(</span><span class="nv">PORT</span> <span class="o">=</span> <span class="m">1521</span><span class="o">))</span>
<a href="#__codelineno-47-8" id="__codelineno-47-8" name="__codelineno-47-8"></a>    <span class="o">)</span>
<a href="#__codelineno-47-9" id="__codelineno-47-9" name="__codelineno-47-9"></a>    <span class="o">(</span><span class="nv">CONNECT_DATA</span> <span class="o">=</span>
<a href="#__codelineno-47-10" id="__codelineno-47-10" name="__codelineno-47-10"></a>      <span class="o">(</span><span class="nv">SERVICE_NAME</span> <span class="o">=</span> ORCLCDB<span class="o">)</span>
<a href="#__codelineno-47-11" id="__codelineno-47-11" name="__codelineno-47-11"></a>    <span class="o">)</span>
<a href="#__codelineno-47-12" id="__codelineno-47-12" name="__codelineno-47-12"></a>  <span class="o">)</span>
<a href="#__codelineno-47-13" id="__codelineno-47-13" name="__codelineno-47-13"></a>
<a href="#__codelineno-47-14" id="__codelineno-47-14" name="__codelineno-47-14"></a><span class="nv">LISTENER_ORCLCDB</span> <span class="o">=</span>
<a href="#__codelineno-47-15" id="__codelineno-47-15" name="__codelineno-47-15"></a>  <span class="o">(</span><span class="nv">ADDRESS</span> <span class="o">=</span> <span class="o">(</span><span class="nv">PROTOCOL</span> <span class="o">=</span> TCP<span class="o">)(</span><span class="nv">HOST</span> <span class="o">=</span> servidororacle<span class="o">)(</span><span class="nv">PORT</span> <span class="o">=</span> <span class="m">1521</span><span class="o">))</span>
</code></pre></div>
<p>Muestro el estado del listener:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a>oracle@servidororacle:~$ lsnrctl status
<a href="#__codelineno-48-2" id="__codelineno-48-2" name="__codelineno-48-2"></a>
<a href="#__codelineno-48-3" id="__codelineno-48-3" name="__codelineno-48-3"></a>LSNRCTL <span class="k">for</span> Linux: Version <span class="m">19</span>.0.0.0.0 - Production on <span class="m">28</span>-OCT-2022 <span class="m">13</span>:43:38
<a href="#__codelineno-48-4" id="__codelineno-48-4" name="__codelineno-48-4"></a>
<a href="#__codelineno-48-5" id="__codelineno-48-5" name="__codelineno-48-5"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">1991</span>, <span class="m">2019</span>, Oracle.  All rights reserved.
<a href="#__codelineno-48-6" id="__codelineno-48-6" name="__codelineno-48-6"></a>
<a href="#__codelineno-48-7" id="__codelineno-48-7" name="__codelineno-48-7"></a>Connecting to <span class="o">(</span><span class="nv">DESCRIPTION</span><span class="o">=(</span><span class="nv">ADDRESS</span><span class="o">=(</span><span class="nv">PROTOCOL</span><span class="o">=</span>TCP<span class="o">)(</span><span class="nv">HOST</span><span class="o">=</span><span class="m">0</span>.0.0.0<span class="o">)(</span><span class="nv">PORT</span><span class="o">=</span><span class="m">1521</span><span class="o">)))</span>
<a href="#__codelineno-48-8" id="__codelineno-48-8" name="__codelineno-48-8"></a>TNS-12541: TNS:no listener
<a href="#__codelineno-48-9" id="__codelineno-48-9" name="__codelineno-48-9"></a> TNS-12560: TNS:protocol adapter error
<a href="#__codelineno-48-10" id="__codelineno-48-10" name="__codelineno-48-10"></a>  TNS-00511: No listener
<a href="#__codelineno-48-11" id="__codelineno-48-11" name="__codelineno-48-11"></a>   Linux Error: <span class="m">111</span>: Connection refused
<a href="#__codelineno-48-12" id="__codelineno-48-12" name="__codelineno-48-12"></a>Connecting to <span class="o">(</span><span class="nv">DESCRIPTION</span><span class="o">=(</span><span class="nv">ADDRESS</span><span class="o">=(</span><span class="nv">PROTOCOL</span><span class="o">=</span>IPC<span class="o">)(</span><span class="nv">KEY</span><span class="o">=</span>EXTPROC1521<span class="o">)))</span>
<a href="#__codelineno-48-13" id="__codelineno-48-13" name="__codelineno-48-13"></a>TNS-12541: TNS:no listener
<a href="#__codelineno-48-14" id="__codelineno-48-14" name="__codelineno-48-14"></a> TNS-12560: TNS:protocol adapter error
<a href="#__codelineno-48-15" id="__codelineno-48-15" name="__codelineno-48-15"></a>  TNS-00511: No listener
<a href="#__codelineno-48-16" id="__codelineno-48-16" name="__codelineno-48-16"></a>   Linux Error: <span class="m">2</span>: No such file or directory
</code></pre></div>
<p>Estos errores significan que está parado, y además podemos comprobar que efectivamente no tenemos procesos esperando peticiones en el puerto 1521:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a>oracle@servidororacle:~$ sudo ss -tulpn
<a href="#__codelineno-49-2" id="__codelineno-49-2" name="__codelineno-49-2"></a>Netid      State        Recv-Q       Send-Q             Local Address:Port              Peer Address:Port      Process
<a href="#__codelineno-49-3" id="__codelineno-49-3" name="__codelineno-49-3"></a>udp        UNCONN       <span class="m">0</span>            <span class="m">0</span>                        <span class="m">0</span>.0.0.0:68                     <span class="m">0</span>.0.0.0:*          users:<span class="o">((</span><span class="s2">"dhclient"</span>,pid<span class="o">=</span><span class="m">314</span>,fd<span class="o">=</span><span class="m">9</span><span class="o">))</span>
<a href="#__codelineno-49-4" id="__codelineno-49-4" name="__codelineno-49-4"></a>udp        UNCONN       <span class="m">0</span>            <span class="m">0</span>                      <span class="m">127</span>.0.0.1:323                    <span class="m">0</span>.0.0.0:*          users:<span class="o">((</span><span class="s2">"chronyd"</span>,pid<span class="o">=</span><span class="m">413</span>,fd<span class="o">=</span><span class="m">5</span><span class="o">))</span>
<a href="#__codelineno-49-5" id="__codelineno-49-5" name="__codelineno-49-5"></a>udp        UNCONN       <span class="m">0</span>            <span class="m">0</span>                          <span class="o">[</span>::1<span class="o">]</span>:21455                     <span class="o">[</span>::<span class="o">]</span>:*          users:<span class="o">((</span><span class="s2">"ora_lreg_orclcd"</span>,pid<span class="o">=</span><span class="m">774</span>,fd<span class="o">=</span><span class="m">10</span><span class="o">))</span>
<a href="#__codelineno-49-6" id="__codelineno-49-6" name="__codelineno-49-6"></a>udp        UNCONN       <span class="m">0</span>            <span class="m">0</span>                          <span class="o">[</span>::1<span class="o">]</span>:48386                     <span class="o">[</span>::<span class="o">]</span>:*          users:<span class="o">((</span><span class="s2">"ora_d000_orclcd"</span>,pid<span class="o">=</span><span class="m">786</span>,fd<span class="o">=</span><span class="m">7</span><span class="o">))</span>
<a href="#__codelineno-49-7" id="__codelineno-49-7" name="__codelineno-49-7"></a>udp        UNCONN       <span class="m">0</span>            <span class="m">0</span>                          <span class="o">[</span>::1<span class="o">]</span>:323                       <span class="o">[</span>::<span class="o">]</span>:*          users:<span class="o">((</span><span class="s2">"chronyd"</span>,pid<span class="o">=</span><span class="m">413</span>,fd<span class="o">=</span><span class="m">6</span><span class="o">))</span>
<a href="#__codelineno-49-8" id="__codelineno-49-8" name="__codelineno-49-8"></a>udp        UNCONN       <span class="m">0</span>            <span class="m">0</span>                          <span class="o">[</span>::1<span class="o">]</span>:51821                     <span class="o">[</span>::<span class="o">]</span>:*          users:<span class="o">((</span><span class="s2">"ora_s000_orclcd"</span>,pid<span class="o">=</span><span class="m">788</span>,fd<span class="o">=</span><span class="m">7</span><span class="o">))</span>
<a href="#__codelineno-49-9" id="__codelineno-49-9" name="__codelineno-49-9"></a>tcp        LISTEN       <span class="m">0</span>            <span class="m">128</span>                      <span class="m">0</span>.0.0.0:22                     <span class="m">0</span>.0.0.0:*          users:<span class="o">((</span><span class="s2">"sshd"</span>,pid<span class="o">=</span><span class="m">411</span>,fd<span class="o">=</span><span class="m">3</span><span class="o">))</span>
<a href="#__codelineno-49-10" id="__codelineno-49-10" name="__codelineno-49-10"></a>tcp        LISTEN       <span class="m">0</span>            <span class="m">128</span>                            *:19393                        *:*          users:<span class="o">((</span><span class="s2">"ora_d000_orclcd"</span>,pid<span class="o">=</span><span class="m">786</span>,fd<span class="o">=</span><span class="m">8</span><span class="o">))</span>
<a href="#__codelineno-49-11" id="__codelineno-49-11" name="__codelineno-49-11"></a>tcp        LISTEN       <span class="m">0</span>            <span class="m">128</span>                         <span class="o">[</span>::<span class="o">]</span>:22                        <span class="o">[</span>::<span class="o">]</span>:*          users:<span class="o">((</span><span class="s2">"sshd"</span>,pid<span class="o">=</span><span class="m">411</span>,fd<span class="o">=</span><span class="m">4</span><span class="o">))</span>
</code></pre></div>
<p>Inicio el listener:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a>oracle@servidororacle:~$ lsnrctl start
<a href="#__codelineno-50-2" id="__codelineno-50-2" name="__codelineno-50-2"></a>
<a href="#__codelineno-50-3" id="__codelineno-50-3" name="__codelineno-50-3"></a>LSNRCTL <span class="k">for</span> Linux: Version <span class="m">19</span>.0.0.0.0 - Production on <span class="m">28</span>-OCT-2022 <span class="m">13</span>:48:46
<a href="#__codelineno-50-4" id="__codelineno-50-4" name="__codelineno-50-4"></a>
<a href="#__codelineno-50-5" id="__codelineno-50-5" name="__codelineno-50-5"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">1991</span>, <span class="m">2019</span>, Oracle.  All rights reserved.
<a href="#__codelineno-50-6" id="__codelineno-50-6" name="__codelineno-50-6"></a>
<a href="#__codelineno-50-7" id="__codelineno-50-7" name="__codelineno-50-7"></a>Starting /opt/oracle/product/19c/dbhome_1/bin/tnslsnr: please wait...
<a href="#__codelineno-50-8" id="__codelineno-50-8" name="__codelineno-50-8"></a>
<a href="#__codelineno-50-9" id="__codelineno-50-9" name="__codelineno-50-9"></a>TNSLSNR <span class="k">for</span> Linux: Version <span class="m">19</span>.0.0.0.0 - Production
<a href="#__codelineno-50-10" id="__codelineno-50-10" name="__codelineno-50-10"></a>System parameter file is /opt/oracle/product/19c/dbhome_1/network/admin/listener.ora
<a href="#__codelineno-50-11" id="__codelineno-50-11" name="__codelineno-50-11"></a>Log messages written to /opt/oracle/diag/tnslsnr/servidororacle/listener/alert/log.xml
<a href="#__codelineno-50-12" id="__codelineno-50-12" name="__codelineno-50-12"></a>Listening on: <span class="o">(</span><span class="nv">DESCRIPTION</span><span class="o">=(</span><span class="nv">ADDRESS</span><span class="o">=(</span><span class="nv">PROTOCOL</span><span class="o">=</span>tcp<span class="o">)(</span><span class="nv">HOST</span><span class="o">=</span><span class="m">0</span>.0.0.0<span class="o">)(</span><span class="nv">PORT</span><span class="o">=</span><span class="m">1521</span><span class="o">)))</span>
<a href="#__codelineno-50-13" id="__codelineno-50-13" name="__codelineno-50-13"></a>Listening on: <span class="o">(</span><span class="nv">DESCRIPTION</span><span class="o">=(</span><span class="nv">ADDRESS</span><span class="o">=(</span><span class="nv">PROTOCOL</span><span class="o">=</span>ipc<span class="o">)(</span><span class="nv">KEY</span><span class="o">=</span>EXTPROC1521<span class="o">)))</span>
<a href="#__codelineno-50-14" id="__codelineno-50-14" name="__codelineno-50-14"></a>
<a href="#__codelineno-50-15" id="__codelineno-50-15" name="__codelineno-50-15"></a>Connecting to <span class="o">(</span><span class="nv">DESCRIPTION</span><span class="o">=(</span><span class="nv">ADDRESS</span><span class="o">=(</span><span class="nv">PROTOCOL</span><span class="o">=</span>TCP<span class="o">)(</span><span class="nv">HOST</span><span class="o">=</span><span class="m">0</span>.0.0.0<span class="o">)(</span><span class="nv">PORT</span><span class="o">=</span><span class="m">1521</span><span class="o">)))</span>
<a href="#__codelineno-50-16" id="__codelineno-50-16" name="__codelineno-50-16"></a>STATUS of the LISTENER
<a href="#__codelineno-50-17" id="__codelineno-50-17" name="__codelineno-50-17"></a>------------------------
<a href="#__codelineno-50-18" id="__codelineno-50-18" name="__codelineno-50-18"></a>Alias                     LISTENER
<a href="#__codelineno-50-19" id="__codelineno-50-19" name="__codelineno-50-19"></a>Version                   TNSLSNR <span class="k">for</span> Linux: Version <span class="m">19</span>.0.0.0.0 - Production
<a href="#__codelineno-50-20" id="__codelineno-50-20" name="__codelineno-50-20"></a>Start Date                <span class="m">28</span>-OCT-2022 <span class="m">13</span>:48:46
<a href="#__codelineno-50-21" id="__codelineno-50-21" name="__codelineno-50-21"></a>Uptime                    <span class="m">0</span> days <span class="m">0</span> hr. <span class="m">0</span> min. <span class="m">0</span> sec
<a href="#__codelineno-50-22" id="__codelineno-50-22" name="__codelineno-50-22"></a>Trace Level               off
<a href="#__codelineno-50-23" id="__codelineno-50-23" name="__codelineno-50-23"></a>Security                  ON: Local OS Authentication
<a href="#__codelineno-50-24" id="__codelineno-50-24" name="__codelineno-50-24"></a>SNMP                      OFF
<a href="#__codelineno-50-25" id="__codelineno-50-25" name="__codelineno-50-25"></a>Listener Parameter File   /opt/oracle/product/19c/dbhome_1/network/admin/listener.ora
<a href="#__codelineno-50-26" id="__codelineno-50-26" name="__codelineno-50-26"></a>Listener Log File         /opt/oracle/diag/tnslsnr/servidororacle/listener/alert/log.xml
<a href="#__codelineno-50-27" id="__codelineno-50-27" name="__codelineno-50-27"></a>Listening Endpoints Summary...
<a href="#__codelineno-50-28" id="__codelineno-50-28" name="__codelineno-50-28"></a>  <span class="o">(</span><span class="nv">DESCRIPTION</span><span class="o">=(</span><span class="nv">ADDRESS</span><span class="o">=(</span><span class="nv">PROTOCOL</span><span class="o">=</span>tcp<span class="o">)(</span><span class="nv">HOST</span><span class="o">=</span><span class="m">0</span>.0.0.0<span class="o">)(</span><span class="nv">PORT</span><span class="o">=</span><span class="m">1521</span><span class="o">)))</span>
<a href="#__codelineno-50-29" id="__codelineno-50-29" name="__codelineno-50-29"></a>  <span class="o">(</span><span class="nv">DESCRIPTION</span><span class="o">=(</span><span class="nv">ADDRESS</span><span class="o">=(</span><span class="nv">PROTOCOL</span><span class="o">=</span>ipc<span class="o">)(</span><span class="nv">KEY</span><span class="o">=</span>EXTPROC1521<span class="o">)))</span>
<a href="#__codelineno-50-30" id="__codelineno-50-30" name="__codelineno-50-30"></a>Services Summary...
<a href="#__codelineno-50-31" id="__codelineno-50-31" name="__codelineno-50-31"></a>Service <span class="s2">"ORCLCDB"</span> has <span class="m">1</span> instance<span class="o">(</span>s<span class="o">)</span>.
<a href="#__codelineno-50-32" id="__codelineno-50-32" name="__codelineno-50-32"></a>  Instance <span class="s2">"ORCLCDB"</span>, status UNKNOWN, has <span class="m">1</span> handler<span class="o">(</span>s<span class="o">)</span> <span class="k">for</span> this service...
<a href="#__codelineno-50-33" id="__codelineno-50-33" name="__codelineno-50-33"></a>The <span class="nb">command</span> completed successfully
</code></pre></div>
<p>Muestro que ahora sí tenemos un proceso esperando peticiones en el puerto 1521:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://i.imgur.com/bhzCQGe.png"><img alt="listenerfunciona" src="https://i.imgur.com/bhzCQGe.png"/></a></p>
<p>Pruebo a hacer un acceso usando tnsnames localmente para comprobar que funciona:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://i.imgur.com/7CJIL08.png"><img alt="tnsnameslocal" src="https://i.imgur.com/7CJIL08.png"/></a></p>
<p>Cuando usamos el @ estamos forzando las conexiones por tnsnames aunque sean locales.</p>
<h3 id="18-instalacion-del-cliente">1.8 Instalación del cliente</h3>
<p>Se hará sobre <code>clienteoracle</code>.</p>
<p>Descargo estos 2 archivos:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a>wget https://download.oracle.com/otn_software/linux/instantclient/218000/instantclient-basic-linux.x64-21.8.0.0.0dbru.zip
<a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a>wget https://download.oracle.com/otn_software/linux/instantclient/218000/instantclient-sqlplus-linux.x64-21.8.0.0.0dbru.zip
</code></pre></div>
<p>Creo el siguiente directorio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-52-1" id="__codelineno-52-1" name="__codelineno-52-1"></a>sudo mkdir /opt/oracle
</code></pre></div>
<p>Descargo <code>unzip</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-53-1" id="__codelineno-53-1" name="__codelineno-53-1"></a>sudo apt update
<a href="#__codelineno-53-2" id="__codelineno-53-2" name="__codelineno-53-2"></a>sudo apt install unzip
</code></pre></div>
<p>Descomprimo:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-54-1" id="__codelineno-54-1" name="__codelineno-54-1"></a>sudo unzip -d /opt/oracle instantclient-basic-linux.x64-21.8.0.0.0dbru.zip
<a href="#__codelineno-54-2" id="__codelineno-54-2" name="__codelineno-54-2"></a>sudo unzip -d /opt/oracle instantclient-sqlplus-linux.x64-21.8.0.0.0dbru.zip
</code></pre></div>
<p>Añado las siguientes variables de entorno a <code>.bashrc</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-55-1" id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/opt/oracle/instantclient_21_8:<span class="nv">$LD_LIBRARY_PATH</span>
<a href="#__codelineno-55-2" id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:<span class="nv">$PATH</span>
</code></pre></div>
<p>Aplico los cambios:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-56-1" id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="nb">source</span> ~/.bashrc
</code></pre></div>
<p>Compruebo que ya funciona <code>sqlplus</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-57-1" id="__codelineno-57-1" name="__codelineno-57-1"></a>vagrant@clienteoracle:~$ sqlplus -V
<a href="#__codelineno-57-2" id="__codelineno-57-2" name="__codelineno-57-2"></a>
<a href="#__codelineno-57-3" id="__codelineno-57-3" name="__codelineno-57-3"></a>SQL*Plus: Release <span class="m">21</span>.0.0.0.0 - Production
<a href="#__codelineno-57-4" id="__codelineno-57-4" name="__codelineno-57-4"></a>Version <span class="m">21</span>.8.0.0.0
</code></pre></div>
<p>Creo el fichero <code>/opt/oracle/instantclient_21_8/network/admin/tnsnames.ora</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-58-1" id="__codelineno-58-1" name="__codelineno-58-1"></a>sudo touch /opt/oracle/instantclient_21_8/network/admin/tnsnames.ora
</code></pre></div>
<p>Con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-59-1" id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="nv">ORCLCDB</span><span class="o">=</span>
<a href="#__codelineno-59-2" id="__codelineno-59-2" name="__codelineno-59-2"></a>  <span class="o">(</span><span class="nv">DESCRIPTION</span> <span class="o">=</span>
<a href="#__codelineno-59-3" id="__codelineno-59-3" name="__codelineno-59-3"></a>    <span class="o">(</span><span class="nv">ADDRESS_LIST</span> <span class="o">=</span>
<a href="#__codelineno-59-4" id="__codelineno-59-4" name="__codelineno-59-4"></a>      <span class="o">(</span><span class="nv">ADDRESS</span> <span class="o">=</span> <span class="o">(</span><span class="nv">PROTOCOL</span> <span class="o">=</span> TCP<span class="o">)(</span><span class="nv">HOST</span> <span class="o">=</span> <span class="m">10</span>.0.0.2<span class="o">)(</span><span class="nv">PORT</span> <span class="o">=</span> <span class="m">1521</span><span class="o">))</span>
<a href="#__codelineno-59-5" id="__codelineno-59-5" name="__codelineno-59-5"></a>    <span class="o">)</span>
<a href="#__codelineno-59-6" id="__codelineno-59-6" name="__codelineno-59-6"></a>    <span class="o">(</span><span class="nv">CONNECT_DATA</span> <span class="o">=</span>
<a href="#__codelineno-59-7" id="__codelineno-59-7" name="__codelineno-59-7"></a>      <span class="o">(</span><span class="nv">SERVICE_NAME</span> <span class="o">=</span> ORCLCDB<span class="o">)</span>
<a href="#__codelineno-59-8" id="__codelineno-59-8" name="__codelineno-59-8"></a>    <span class="o">)</span>
<a href="#__codelineno-59-9" id="__codelineno-59-9" name="__codelineno-59-9"></a>  <span class="o">)</span>
</code></pre></div>
<h3 id="19-prueba-de-acceso-remoto">1.9 Prueba de acceso remoto</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-60-1" id="__codelineno-60-1" name="__codelineno-60-1"></a>vagrant@clienteoracle:~$ sqlplus bibliofilos_admin/1234@ORCLCDB
<a href="#__codelineno-60-2" id="__codelineno-60-2" name="__codelineno-60-2"></a>
<a href="#__codelineno-60-3" id="__codelineno-60-3" name="__codelineno-60-3"></a>SQL*Plus: Release <span class="m">21</span>.0.0.0.0 - Production on Fri Oct <span class="m">28</span> <span class="m">12</span>:23:58 <span class="m">2022</span>
<a href="#__codelineno-60-4" id="__codelineno-60-4" name="__codelineno-60-4"></a>Version <span class="m">21</span>.8.0.0.0
<a href="#__codelineno-60-5" id="__codelineno-60-5" name="__codelineno-60-5"></a>
<a href="#__codelineno-60-6" id="__codelineno-60-6" name="__codelineno-60-6"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">1982</span>, <span class="m">2022</span>, Oracle.  All rights reserved.
<a href="#__codelineno-60-7" id="__codelineno-60-7" name="__codelineno-60-7"></a>
<a href="#__codelineno-60-8" id="__codelineno-60-8" name="__codelineno-60-8"></a>Last Successful login time: Fri Oct <span class="m">28</span> <span class="m">2022</span> <span class="m">12</span>:23:47 +00:00
<a href="#__codelineno-60-9" id="__codelineno-60-9" name="__codelineno-60-9"></a>
<a href="#__codelineno-60-10" id="__codelineno-60-10" name="__codelineno-60-10"></a>Connected to:
<a href="#__codelineno-60-11" id="__codelineno-60-11" name="__codelineno-60-11"></a>Oracle Database 19c Enterprise Edition Release <span class="m">19</span>.0.0.0.0 - Production
<a href="#__codelineno-60-12" id="__codelineno-60-12" name="__codelineno-60-12"></a>Version <span class="m">19</span>.3.0.0.0
<a href="#__codelineno-60-13" id="__codelineno-60-13" name="__codelineno-60-13"></a>
<a href="#__codelineno-60-14" id="__codelineno-60-14" name="__codelineno-60-14"></a>SQL&gt; <span class="nb">set</span> linesize <span class="m">32000</span>
<a href="#__codelineno-60-15" id="__codelineno-60-15" name="__codelineno-60-15"></a>SQL&gt; <span class="nb">set</span> pagesize <span class="m">400</span>
<a href="#__codelineno-60-16" id="__codelineno-60-16" name="__codelineno-60-16"></a>SQL&gt; <span class="k">select</span> * from bibliotecas<span class="p">;</span>
<a href="#__codelineno-60-17" id="__codelineno-60-17" name="__codelineno-60-17"></a>
<a href="#__codelineno-60-18" id="__codelineno-60-18" name="__codelineno-60-18"></a>    ID CIUDAD                                                 CALLE
<a href="#__codelineno-60-19" id="__codelineno-60-19" name="__codelineno-60-19"></a>---------- -------------------------------------------------- --------------------------------------------------
<a href="#__codelineno-60-20" id="__codelineno-60-20" name="__codelineno-60-20"></a>     <span class="m">1</span> Utrera                                                 Alvarez Quintero
<a href="#__codelineno-60-21" id="__codelineno-60-21" name="__codelineno-60-21"></a>     <span class="m">2</span> Dos Hermanas                                       Plaza Huerta Palacios
</code></pre></div>
<h3 id="110-mejoras-de-sqlplus">1.10 Mejoras de sqlplus</h3>
<h4 id="1101">1.10.1</h4>
<p>Para tener un formateado correcto del output <strong>permanente</strong>, tenemos que editar el fichero <code>/opt/oracle/product/19c/dbhome_1/sqlplus/admin/glogin.sql</code>.</p>
<p>Lo podemos definir como queramos, en mi caso lo dejaré de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-61-1" id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="c1">--</span>
<a href="#__codelineno-61-2" id="__codelineno-61-2" name="__codelineno-61-2"></a><span class="c1">-- Copyright (c) 1988, 2005, Oracle.  All Rights Reserved.</span>
<a href="#__codelineno-61-3" id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="c1">--</span>
<a href="#__codelineno-61-4" id="__codelineno-61-4" name="__codelineno-61-4"></a><span class="c1">-- NAME</span>
<a href="#__codelineno-61-5" id="__codelineno-61-5" name="__codelineno-61-5"></a><span class="c1">--   glogin.sql</span>
<a href="#__codelineno-61-6" id="__codelineno-61-6" name="__codelineno-61-6"></a><span class="c1">--</span>
<a href="#__codelineno-61-7" id="__codelineno-61-7" name="__codelineno-61-7"></a><span class="c1">-- DESCRIPTION</span>
<a href="#__codelineno-61-8" id="__codelineno-61-8" name="__codelineno-61-8"></a><span class="c1">--   SQL*Plus global login "site profile" file</span>
<a href="#__codelineno-61-9" id="__codelineno-61-9" name="__codelineno-61-9"></a><span class="c1">--</span>
<a href="#__codelineno-61-10" id="__codelineno-61-10" name="__codelineno-61-10"></a><span class="c1">--   Add any SQL*Plus commands here that are to be executed when a</span>
<a href="#__codelineno-61-11" id="__codelineno-61-11" name="__codelineno-61-11"></a><span class="c1">--   user starts SQL*Plus, or uses the SQL*Plus CONNECT command.</span>
<a href="#__codelineno-61-12" id="__codelineno-61-12" name="__codelineno-61-12"></a><span class="c1">--</span>
<a href="#__codelineno-61-13" id="__codelineno-61-13" name="__codelineno-61-13"></a><span class="c1">-- USAGE</span>
<a href="#__codelineno-61-14" id="__codelineno-61-14" name="__codelineno-61-14"></a><span class="c1">--   This script is automatically run</span>
<a href="#__codelineno-61-15" id="__codelineno-61-15" name="__codelineno-61-15"></a><span class="c1">--</span>
<a href="#__codelineno-61-16" id="__codelineno-61-16" name="__codelineno-61-16"></a>
<a href="#__codelineno-61-17" id="__codelineno-61-17" name="__codelineno-61-17"></a><span class="k">set</span><span class="w"> </span><span class="n">linesize</span><span class="w"> </span><span class="mi">32000</span><span class="w"></span>
<a href="#__codelineno-61-18" id="__codelineno-61-18" name="__codelineno-61-18"></a><span class="k">set</span><span class="w"> </span><span class="n">pagesize</span><span class="w"> </span><span class="mi">400</span><span class="w"></span>
</code></pre></div>
<p>Me conecto y hago una select para comprobar que funciona:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-62-1" id="__codelineno-62-1" name="__codelineno-62-1"></a>oracle@servidororacle:~$ sqlplus bibliofilos_admin/1234@ORCLCDB
<a href="#__codelineno-62-2" id="__codelineno-62-2" name="__codelineno-62-2"></a>
<a href="#__codelineno-62-3" id="__codelineno-62-3" name="__codelineno-62-3"></a>SQL*Plus: Release <span class="m">19</span>.0.0.0.0 - Production on Fri Oct <span class="m">28</span> <span class="m">12</span>:39:06 <span class="m">2022</span>
<a href="#__codelineno-62-4" id="__codelineno-62-4" name="__codelineno-62-4"></a>Version <span class="m">19</span>.3.0.0.0
<a href="#__codelineno-62-5" id="__codelineno-62-5" name="__codelineno-62-5"></a>
<a href="#__codelineno-62-6" id="__codelineno-62-6" name="__codelineno-62-6"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">1982</span>, <span class="m">2019</span>, Oracle.  All rights reserved.
<a href="#__codelineno-62-7" id="__codelineno-62-7" name="__codelineno-62-7"></a>
<a href="#__codelineno-62-8" id="__codelineno-62-8" name="__codelineno-62-8"></a>Last Successful login time: Fri Oct <span class="m">28</span> <span class="m">2022</span> <span class="m">12</span>:23:58 +00:00
<a href="#__codelineno-62-9" id="__codelineno-62-9" name="__codelineno-62-9"></a>
<a href="#__codelineno-62-10" id="__codelineno-62-10" name="__codelineno-62-10"></a>Connected to:
<a href="#__codelineno-62-11" id="__codelineno-62-11" name="__codelineno-62-11"></a>Oracle Database 19c Enterprise Edition Release <span class="m">19</span>.0.0.0.0 - Production
<a href="#__codelineno-62-12" id="__codelineno-62-12" name="__codelineno-62-12"></a>Version <span class="m">19</span>.3.0.0.0
<a href="#__codelineno-62-13" id="__codelineno-62-13" name="__codelineno-62-13"></a>
<a href="#__codelineno-62-14" id="__codelineno-62-14" name="__codelineno-62-14"></a>SQL&gt; <span class="k">select</span> * from bibliotecas<span class="p">;</span>
<a href="#__codelineno-62-15" id="__codelineno-62-15" name="__codelineno-62-15"></a>
<a href="#__codelineno-62-16" id="__codelineno-62-16" name="__codelineno-62-16"></a>    ID CIUDAD                                                 CALLE
<a href="#__codelineno-62-17" id="__codelineno-62-17" name="__codelineno-62-17"></a>---------- -------------------------------------------------- --------------------------------------------------
<a href="#__codelineno-62-18" id="__codelineno-62-18" name="__codelineno-62-18"></a>     <span class="m">1</span> Utrera                                                 Alvarez Quintero
<a href="#__codelineno-62-19" id="__codelineno-62-19" name="__codelineno-62-19"></a>     <span class="m">2</span> Dos Hermanas                                       Plaza Huerta Palacios
</code></pre></div>
<h4 id="1102">1.10.2</h4>
<p>Por defecto sqlplus no trae la funcionalidad de historial de comandos y uso de las flechas para mover el cursor en los comandos.</p>
<p>Si lo intentamos, nos sucede lo siguiente:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://i.postimg.cc/Jn6ZpCz3/sqlplussinwrapper.gif"><img alt="sqlplusinwrapper" src="https://i.postimg.cc/Jn6ZpCz3/sqlplussinwrapper.gif"/></a></p>
<p>Para arreglarlo, tenemos que instalar:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-63-1" id="__codelineno-63-1" name="__codelineno-63-1"></a>sudo apt install rlwrap
</code></pre></div>
<p>A partir de ahora, tenemos que ejecutar sqlplus de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-64-1" id="__codelineno-64-1" name="__codelineno-64-1"></a>rlwrap sqlplus bibliofilos_admin/1234@ORCLCDB
</code></pre></div>
<p>Básicamente añadiendo <code>rlwrap</code> al principio de cualquier comando de conexión sqlplus que queramos hacer.</p>
<p>Hacer esto siempre es tedioso, así que podemos crear un alias en <code>~/.bashrc</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-65-1" id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="nb">alias</span> <span class="nv">sqlplus</span><span class="o">=</span><span class="s1">'rlwrap sqlplus'</span>
</code></pre></div>
<p>Aplico los cambios:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-66-1" id="__codelineno-66-1" name="__codelineno-66-1"></a><span class="nb">source</span> ~/.bashrc
</code></pre></div>
<p>Muestro el funcionamiento correcto:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://i.postimg.cc/qRg3FDY8/rlwrapper.gif"><img alt="sqlplusconwrapper" src="https://i.postimg.cc/qRg3FDY8/rlwrapper.gif"/></a></p>
<h2 id="2-postgresql">2. PostgreSQL</h2>
<h3 id="21-instalacion-del-servidor">2.1 Instalación del servidor</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-67-1" id="__codelineno-67-1" name="__codelineno-67-1"></a>sudo apt update
<a href="#__codelineno-67-2" id="__codelineno-67-2" name="__codelineno-67-2"></a>sudo apt install postgresql postgresql-contrib
</code></pre></div>
<p>Compruebo que funciona:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-68-1" id="__codelineno-68-1" name="__codelineno-68-1"></a>vagrant@servidorpostgresql:~$ sudo systemctl status postgresql
<a href="#__codelineno-68-2" id="__codelineno-68-2" name="__codelineno-68-2"></a>● postgresql.service - PostgreSQL RDBMS
<a href="#__codelineno-68-3" id="__codelineno-68-3" name="__codelineno-68-3"></a>     Loaded: loaded <span class="o">(</span>/lib/systemd/system/postgresql.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
<a href="#__codelineno-68-4" id="__codelineno-68-4" name="__codelineno-68-4"></a>     Active: active <span class="o">(</span>exited<span class="o">)</span> since Tue <span class="m">2022</span>-10-18 <span class="m">10</span>:12:46 UTC<span class="p">;</span> 2min 50s ago
<a href="#__codelineno-68-5" id="__codelineno-68-5" name="__codelineno-68-5"></a>   Main PID: <span class="m">2772</span> <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span><span class="m">0</span>/SUCCESS<span class="o">)</span>
<a href="#__codelineno-68-6" id="__codelineno-68-6" name="__codelineno-68-6"></a>      Tasks: <span class="m">0</span> <span class="o">(</span>limit: <span class="m">527</span><span class="o">)</span>
<a href="#__codelineno-68-7" id="__codelineno-68-7" name="__codelineno-68-7"></a>     Memory: 0B
<a href="#__codelineno-68-8" id="__codelineno-68-8" name="__codelineno-68-8"></a>        CPU: <span class="m">0</span>
<a href="#__codelineno-68-9" id="__codelineno-68-9" name="__codelineno-68-9"></a>     CGroup: /system.slice/postgresql.service
<a href="#__codelineno-68-10" id="__codelineno-68-10" name="__codelineno-68-10"></a>
<a href="#__codelineno-68-11" id="__codelineno-68-11" name="__codelineno-68-11"></a>Oct <span class="m">18</span> <span class="m">10</span>:12:46 servidorpostgresql systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>: Starting PostgreSQL RDBMS...
<a href="#__codelineno-68-12" id="__codelineno-68-12" name="__codelineno-68-12"></a>Oct <span class="m">18</span> <span class="m">10</span>:12:46 servidorpostgresql systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>: Finished PostgreSQL RDBMS.
</code></pre></div>
<h3 id="22-acceso-local-privilegiado">2.2 Acceso local privilegiado</h3>
<p>Añado la contraseña <code>1234</code> a <code>postgres</code> para habilitarlo:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-69-1" id="__codelineno-69-1" name="__codelineno-69-1"></a>sudo passwd postgres
</code></pre></div>
<p>Pruebo el acceso con <code>postgres</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-70-1" id="__codelineno-70-1" name="__codelineno-70-1"></a>vagrant@servidorpostgresql:~$ su - postgres
<a href="#__codelineno-70-2" id="__codelineno-70-2" name="__codelineno-70-2"></a>Password:
<a href="#__codelineno-70-3" id="__codelineno-70-3" name="__codelineno-70-3"></a>postgres@servidorpostgresql:~$ psql
<a href="#__codelineno-70-4" id="__codelineno-70-4" name="__codelineno-70-4"></a>psql <span class="o">(</span><span class="m">13</span>.8 <span class="o">(</span>Debian <span class="m">13</span>.8-0+deb11u1<span class="o">))</span>
<a href="#__codelineno-70-5" id="__codelineno-70-5" name="__codelineno-70-5"></a>Type <span class="s2">"help"</span> <span class="k">for</span> help.
<a href="#__codelineno-70-6" id="__codelineno-70-6" name="__codelineno-70-6"></a>
<a href="#__codelineno-70-7" id="__codelineno-70-7" name="__codelineno-70-7"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1">#</span>
</code></pre></div>
<h3 id="23-creacion-de-la-base-de-datos">2.3 Creación de la base de datos</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-71-1" id="__codelineno-71-1" name="__codelineno-71-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">bibliofilos</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se ha creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-72-1" id="__codelineno-72-1" name="__codelineno-72-1"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \l</span>
<a href="#__codelineno-72-2" id="__codelineno-72-2" name="__codelineno-72-2"></a>                               List of databases
<a href="#__codelineno-72-3" id="__codelineno-72-3" name="__codelineno-72-3"></a>    Name     <span class="p">|</span>  Owner   <span class="p">|</span> Encoding <span class="p">|</span> Collate <span class="p">|</span>  Ctype  <span class="p">|</span>   Access privileges
<a href="#__codelineno-72-4" id="__codelineno-72-4" name="__codelineno-72-4"></a>-------------+----------+----------+---------+---------+-----------------------
<a href="#__codelineno-72-5" id="__codelineno-72-5" name="__codelineno-72-5"></a> bibliofilos <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span>
<a href="#__codelineno-72-6" id="__codelineno-72-6" name="__codelineno-72-6"></a> postgres    <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span>
<a href="#__codelineno-72-7" id="__codelineno-72-7" name="__codelineno-72-7"></a> template0   <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>c/postgres          +
<a href="#__codelineno-72-8" id="__codelineno-72-8" name="__codelineno-72-8"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-72-9" id="__codelineno-72-9" name="__codelineno-72-9"></a> template1   <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>c/postgres          +
<a href="#__codelineno-72-10" id="__codelineno-72-10" name="__codelineno-72-10"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-72-11" id="__codelineno-72-11" name="__codelineno-72-11"></a><span class="o">(</span><span class="m">4</span> rows<span class="o">)</span>
</code></pre></div>
<p>Me conecto:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-73-1" id="__codelineno-73-1" name="__codelineno-73-1"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \connect bibliofilos</span>
<a href="#__codelineno-73-2" id="__codelineno-73-2" name="__codelineno-73-2"></a>You are now connected to database <span class="s2">"bibliofilos"</span> as user <span class="s2">"postgres"</span>.
<a href="#__codelineno-73-3" id="__codelineno-73-3" name="__codelineno-73-3"></a><span class="nv">bibliofilos</span><span class="o">=</span><span class="c1">#</span>
</code></pre></div>
<h3 id="24-creacion-de-tablas">2.4 Creación de tablas</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-74-1" id="__codelineno-74-1" name="__codelineno-74-1"></a>CREATE TABLE bibliotecas <span class="o">(</span>
<a href="#__codelineno-74-2" id="__codelineno-74-2" name="__codelineno-74-2"></a>  id serial PRIMARY KEY,
<a href="#__codelineno-74-3" id="__codelineno-74-3" name="__codelineno-74-3"></a>  ciudad VARCHAR <span class="o">(</span> <span class="m">50</span> <span class="o">)</span> NOT NULL,
<a href="#__codelineno-74-4" id="__codelineno-74-4" name="__codelineno-74-4"></a>  calle VARCHAR <span class="o">(</span> <span class="m">50</span> <span class="o">)</span> NOT NULL
<a href="#__codelineno-74-5" id="__codelineno-74-5" name="__codelineno-74-5"></a><span class="o">)</span><span class="p">;</span>
<a href="#__codelineno-74-6" id="__codelineno-74-6" name="__codelineno-74-6"></a>
<a href="#__codelineno-74-7" id="__codelineno-74-7" name="__codelineno-74-7"></a>CREATE TABLE libros <span class="o">(</span>
<a href="#__codelineno-74-8" id="__codelineno-74-8" name="__codelineno-74-8"></a>  id serial PRIMARY KEY,
<a href="#__codelineno-74-9" id="__codelineno-74-9" name="__codelineno-74-9"></a>  id_biblioteca serial NOT NULL,
<a href="#__codelineno-74-10" id="__codelineno-74-10" name="__codelineno-74-10"></a>  n_paginas int NOT NULL,
<a href="#__codelineno-74-11" id="__codelineno-74-11" name="__codelineno-74-11"></a>  autor VARCHAR <span class="o">(</span> <span class="m">50</span> <span class="o">)</span> NOT NULL,
<a href="#__codelineno-74-12" id="__codelineno-74-12" name="__codelineno-74-12"></a>  FOREIGN KEY <span class="o">(</span>id_biblioteca<span class="o">)</span>
<a href="#__codelineno-74-13" id="__codelineno-74-13" name="__codelineno-74-13"></a>    REFERENCES Bibliotecas <span class="o">(</span>id<span class="o">)</span>
<a href="#__codelineno-74-14" id="__codelineno-74-14" name="__codelineno-74-14"></a><span class="o">)</span><span class="p">;</span>
<a href="#__codelineno-74-15" id="__codelineno-74-15" name="__codelineno-74-15"></a>
<a href="#__codelineno-74-16" id="__codelineno-74-16" name="__codelineno-74-16"></a>CREATE TABLE trabajadores <span class="o">(</span>
<a href="#__codelineno-74-17" id="__codelineno-74-17" name="__codelineno-74-17"></a>  id serial PRIMARY KEY,
<a href="#__codelineno-74-18" id="__codelineno-74-18" name="__codelineno-74-18"></a>  id_biblioteca serial NOT NULL,
<a href="#__codelineno-74-19" id="__codelineno-74-19" name="__codelineno-74-19"></a>  nombre VARCHAR <span class="o">(</span> <span class="m">50</span> <span class="o">)</span> NOT NULL,
<a href="#__codelineno-74-20" id="__codelineno-74-20" name="__codelineno-74-20"></a>  apellido VARCHAR <span class="o">(</span> <span class="m">50</span> <span class="o">)</span> NOT NULL,
<a href="#__codelineno-74-21" id="__codelineno-74-21" name="__codelineno-74-21"></a>  FOREIGN KEY <span class="o">(</span>id_biblioteca<span class="o">)</span>
<a href="#__codelineno-74-22" id="__codelineno-74-22" name="__codelineno-74-22"></a>    REFERENCES Bibliotecas <span class="o">(</span>id<span class="o">)</span>
<a href="#__codelineno-74-23" id="__codelineno-74-23" name="__codelineno-74-23"></a><span class="o">)</span><span class="p">;</span>
</code></pre></div>
<p>Compruebo que se han creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-75-1" id="__codelineno-75-1" name="__codelineno-75-1"></a><span class="nv">bibliofilos</span><span class="o">=</span><span class="c1"># \dt</span>
<a href="#__codelineno-75-2" id="__codelineno-75-2" name="__codelineno-75-2"></a>            List of relations
<a href="#__codelineno-75-3" id="__codelineno-75-3" name="__codelineno-75-3"></a> Schema <span class="p">|</span>     Name     <span class="p">|</span> Type  <span class="p">|</span>  Owner
<a href="#__codelineno-75-4" id="__codelineno-75-4" name="__codelineno-75-4"></a>--------+--------------+-------+----------
<a href="#__codelineno-75-5" id="__codelineno-75-5" name="__codelineno-75-5"></a> public <span class="p">|</span> bibliotecas  <span class="p">|</span> table <span class="p">|</span> postgres
<a href="#__codelineno-75-6" id="__codelineno-75-6" name="__codelineno-75-6"></a> public <span class="p">|</span> libros       <span class="p">|</span> table <span class="p">|</span> postgres
<a href="#__codelineno-75-7" id="__codelineno-75-7" name="__codelineno-75-7"></a> public <span class="p">|</span> trabajadores <span class="p">|</span> table <span class="p">|</span> postgres
<a href="#__codelineno-75-8" id="__codelineno-75-8" name="__codelineno-75-8"></a><span class="o">(</span><span class="m">3</span> rows<span class="o">)</span>
</code></pre></div>
<h3 id="25-insercion-de-registros">2.5 Inserción de registros</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-76-1" id="__codelineno-76-1" name="__codelineno-76-1"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="s1">'Utrera'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Alvarez Quintero'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-76-2" id="__codelineno-76-2" name="__codelineno-76-2"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="s1">'Dos Hermanas'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Plaza Huerta Palacios'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-76-3" id="__codelineno-76-3" name="__codelineno-76-3"></a>
<a href="#__codelineno-76-4" id="__codelineno-76-4" name="__codelineno-76-4"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">libros</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="s1">'Dale Carnegie'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-76-5" id="__codelineno-76-5" name="__codelineno-76-5"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">libros</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">714</span><span class="p">,</span><span class="w"> </span><span class="s1">'Anne Frank'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-76-6" id="__codelineno-76-6" name="__codelineno-76-6"></a>
<a href="#__codelineno-76-7" id="__codelineno-76-7" name="__codelineno-76-7"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'Pepe'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Pepito'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-76-8" id="__codelineno-76-8" name="__codelineno-76-8"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Jose'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Joselito'</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han añadido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-77-1" id="__codelineno-77-1" name="__codelineno-77-1"></a><span class="nv">bibliofilos</span><span class="o">=</span><span class="c1"># select * from bibliotecas;</span>
<a href="#__codelineno-77-2" id="__codelineno-77-2" name="__codelineno-77-2"></a> id <span class="p">|</span>    ciudad    <span class="p">|</span>         calle
<a href="#__codelineno-77-3" id="__codelineno-77-3" name="__codelineno-77-3"></a>----+--------------+-----------------------
<a href="#__codelineno-77-4" id="__codelineno-77-4" name="__codelineno-77-4"></a>  <span class="m">1</span> <span class="p">|</span> Utrera       <span class="p">|</span> Alvarez Quintero
<a href="#__codelineno-77-5" id="__codelineno-77-5" name="__codelineno-77-5"></a>  <span class="m">2</span> <span class="p">|</span> Dos Hermanas <span class="p">|</span> Plaza Huerta Palacios
<a href="#__codelineno-77-6" id="__codelineno-77-6" name="__codelineno-77-6"></a><span class="o">(</span><span class="m">2</span> rows<span class="o">)</span>
<a href="#__codelineno-77-7" id="__codelineno-77-7" name="__codelineno-77-7"></a>
<a href="#__codelineno-77-8" id="__codelineno-77-8" name="__codelineno-77-8"></a><span class="nv">bibliofilos</span><span class="o">=</span><span class="c1"># select * from libros;</span>
<a href="#__codelineno-77-9" id="__codelineno-77-9" name="__codelineno-77-9"></a> id <span class="p">|</span> id_biblioteca <span class="p">|</span> n_paginas <span class="p">|</span>     autor
<a href="#__codelineno-77-10" id="__codelineno-77-10" name="__codelineno-77-10"></a>----+---------------+-----------+---------------
<a href="#__codelineno-77-11" id="__codelineno-77-11" name="__codelineno-77-11"></a>  <span class="m">1</span> <span class="p">|</span>             <span class="m">1</span> <span class="p">|</span>       <span class="m">320</span> <span class="p">|</span> Dale Carnegie
<a href="#__codelineno-77-12" id="__codelineno-77-12" name="__codelineno-77-12"></a>  <span class="m">2</span> <span class="p">|</span>             <span class="m">2</span> <span class="p">|</span>       <span class="m">714</span> <span class="p">|</span> Anne Frank
<a href="#__codelineno-77-13" id="__codelineno-77-13" name="__codelineno-77-13"></a><span class="o">(</span><span class="m">2</span> rows<span class="o">)</span>
<a href="#__codelineno-77-14" id="__codelineno-77-14" name="__codelineno-77-14"></a>
<a href="#__codelineno-77-15" id="__codelineno-77-15" name="__codelineno-77-15"></a><span class="nv">bibliofilos</span><span class="o">=</span><span class="c1"># select * from trabajadores;</span>
<a href="#__codelineno-77-16" id="__codelineno-77-16" name="__codelineno-77-16"></a> id <span class="p">|</span> id_biblioteca <span class="p">|</span> nombre <span class="p">|</span> apellido
<a href="#__codelineno-77-17" id="__codelineno-77-17" name="__codelineno-77-17"></a>----+---------------+--------+----------
<a href="#__codelineno-77-18" id="__codelineno-77-18" name="__codelineno-77-18"></a>  <span class="m">1</span> <span class="p">|</span>             <span class="m">1</span> <span class="p">|</span> Pepe   <span class="p">|</span> Pepito
<a href="#__codelineno-77-19" id="__codelineno-77-19" name="__codelineno-77-19"></a>  <span class="m">2</span> <span class="p">|</span>             <span class="m">2</span> <span class="p">|</span> Jose   <span class="p">|</span> Joselito
<a href="#__codelineno-77-20" id="__codelineno-77-20" name="__codelineno-77-20"></a><span class="o">(</span><span class="m">2</span> rows<span class="o">)</span>
</code></pre></div>
<h3 id="26-creacion-de-usuarios">2.6 Creación de usuarios</h3>
<p>En debian:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-78-1" id="__codelineno-78-1" name="__codelineno-78-1"></a>sudo adduser bibliofilos_admin
</code></pre></div>
<p>En PostgreSQL:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-79-1" id="__codelineno-79-1" name="__codelineno-79-1"></a><span class="k">create</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">encrypted</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="s1">'1234'</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se ha creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-80-1" id="__codelineno-80-1" name="__codelineno-80-1"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \du</span>
<a href="#__codelineno-80-2" id="__codelineno-80-2" name="__codelineno-80-2"></a>                                       List of roles
<a href="#__codelineno-80-3" id="__codelineno-80-3" name="__codelineno-80-3"></a>     Role name     <span class="p">|</span>                         Attributes                         <span class="p">|</span> Member of
<a href="#__codelineno-80-4" id="__codelineno-80-4" name="__codelineno-80-4"></a>-------------------+------------------------------------------------------------+-----------
<a href="#__codelineno-80-5" id="__codelineno-80-5" name="__codelineno-80-5"></a> bibliofilos_admin <span class="p">|</span>                                                            <span class="p">|</span> <span class="o">{}</span>
<a href="#__codelineno-80-6" id="__codelineno-80-6" name="__codelineno-80-6"></a> postgres          <span class="p">|</span> Superuser, Create role, Create DB, Replication, Bypass RLS <span class="p">|</span> <span class="o">{}</span>
</code></pre></div>
<p>Le doy privilegios sobre la base de datos:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-81-1" id="__codelineno-81-1" name="__codelineno-81-1"></a><span class="k">GRANT</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="k">privileges</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Al listar las bases de datos podemos ver los privilegios de acceso:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-82-1" id="__codelineno-82-1" name="__codelineno-82-1"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \l</span>
<a href="#__codelineno-82-2" id="__codelineno-82-2" name="__codelineno-82-2"></a>                                   List of databases
<a href="#__codelineno-82-3" id="__codelineno-82-3" name="__codelineno-82-3"></a>    Name     <span class="p">|</span>  Owner   <span class="p">|</span> Encoding <span class="p">|</span> Collate <span class="p">|</span>  Ctype  <span class="p">|</span>       Access privileges
<a href="#__codelineno-82-4" id="__codelineno-82-4" name="__codelineno-82-4"></a>-------------+----------+----------+---------+---------+--------------------------------
<a href="#__codelineno-82-5" id="__codelineno-82-5" name="__codelineno-82-5"></a> bibliofilos <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>Tc/postgres                  +
<a href="#__codelineno-82-6" id="__codelineno-82-6" name="__codelineno-82-6"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres         +
<a href="#__codelineno-82-7" id="__codelineno-82-7" name="__codelineno-82-7"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">bibliofilos_admin</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-82-8" id="__codelineno-82-8" name="__codelineno-82-8"></a> postgres    <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span>
<a href="#__codelineno-82-9" id="__codelineno-82-9" name="__codelineno-82-9"></a> template0   <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>c/postgres                   +
<a href="#__codelineno-82-10" id="__codelineno-82-10" name="__codelineno-82-10"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-82-11" id="__codelineno-82-11" name="__codelineno-82-11"></a> template1   <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>c/postgres                   +
<a href="#__codelineno-82-12" id="__codelineno-82-12" name="__codelineno-82-12"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-82-13" id="__codelineno-82-13" name="__codelineno-82-13"></a><span class="o">(</span><span class="m">4</span> rows<span class="o">)</span>
</code></pre></div>
<p>Le doy privilegios sobre las tablas:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-83-1" id="__codelineno-83-1" name="__codelineno-83-1"></a><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="n">TABLES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Muestro que se han aplicado los privilegios:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-84-1" id="__codelineno-84-1" name="__codelineno-84-1"></a><span class="n">bibliofilos</span><span class="o">=#</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">table_privileges</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">grantee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'bibliofilos_admin'</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-84-2" id="__codelineno-84-2" name="__codelineno-84-2"></a><span class="w"> </span><span class="n">grantor</span><span class="w">  </span><span class="o">|</span><span class="w">      </span><span class="n">grantee</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">table_catalog</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">table_schema</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="k">table_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">privilege_type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">is_grantable</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">with_hierarchy</span><span class="w"></span>
<a href="#__codelineno-84-3" id="__codelineno-84-3" name="__codelineno-84-3"></a><span class="c1">----------+-------------------+---------------+--------------+--------------+----------------+--------------+----------------</span>
<a href="#__codelineno-84-4" id="__codelineno-84-4" name="__codelineno-84-4"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">INSERT</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-5" id="__codelineno-84-5" name="__codelineno-84-5"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">SELECT</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w"></span>
<a href="#__codelineno-84-6" id="__codelineno-84-6" name="__codelineno-84-6"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">UPDATE</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-7" id="__codelineno-84-7" name="__codelineno-84-7"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">DELETE</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-8" id="__codelineno-84-8" name="__codelineno-84-8"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">TRUNCATE</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-9" id="__codelineno-84-9" name="__codelineno-84-9"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-10" id="__codelineno-84-10" name="__codelineno-84-10"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-11" id="__codelineno-84-11" name="__codelineno-84-11"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">libros</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">INSERT</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-12" id="__codelineno-84-12" name="__codelineno-84-12"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">libros</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">SELECT</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w"></span>
<a href="#__codelineno-84-13" id="__codelineno-84-13" name="__codelineno-84-13"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">libros</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">UPDATE</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-14" id="__codelineno-84-14" name="__codelineno-84-14"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">libros</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">DELETE</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-15" id="__codelineno-84-15" name="__codelineno-84-15"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">libros</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">TRUNCATE</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-16" id="__codelineno-84-16" name="__codelineno-84-16"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">libros</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-17" id="__codelineno-84-17" name="__codelineno-84-17"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">libros</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-18" id="__codelineno-84-18" name="__codelineno-84-18"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">INSERT</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-19" id="__codelineno-84-19" name="__codelineno-84-19"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">SELECT</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w"></span>
<a href="#__codelineno-84-20" id="__codelineno-84-20" name="__codelineno-84-20"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">UPDATE</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-21" id="__codelineno-84-21" name="__codelineno-84-21"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">DELETE</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-22" id="__codelineno-84-22" name="__codelineno-84-22"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">TRUNCATE</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-23" id="__codelineno-84-23" name="__codelineno-84-23"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-24" id="__codelineno-84-24" name="__codelineno-84-24"></a><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">public</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">TRIGGER</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w"></span>
<a href="#__codelineno-84-25" id="__codelineno-84-25" name="__codelineno-84-25"></a><span class="p">(</span><span class="mi">21</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="27-configuracion-del-acceso-remoto">2.7 Configuración del acceso remoto</h3>
<p>Modifico la siguiente línea en <code>/etc/postgresql/13/main/postgresql.conf</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-85-1" id="__codelineno-85-1" name="__codelineno-85-1"></a><span class="nv">listen_addresses</span> <span class="o">=</span> <span class="s1">'*'</span>
</code></pre></div>
<p>Añado las siguientes líneas a <code>/etc/postgresql/13/main/pg_hba.conf</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-86-1" id="__codelineno-86-1" name="__codelineno-86-1"></a><span class="c1"># Remote connections</span>
<a href="#__codelineno-86-2" id="__codelineno-86-2" name="__codelineno-86-2"></a>host    all             all             <span class="m">0</span>.0.0.0/0               md5
</code></pre></div>
<p>Reinicio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-87-1" id="__codelineno-87-1" name="__codelineno-87-1"></a>sudo systemctl restart postgresql 
</code></pre></div>
<h3 id="28-instalacion-del-cliente">2.8 Instalación del cliente</h3>
<p>Se hará sobre <code>clientepostgresql</code>.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-88-1" id="__codelineno-88-1" name="__codelineno-88-1"></a>sudo apt update
<a href="#__codelineno-88-2" id="__codelineno-88-2" name="__codelineno-88-2"></a>sudo apt install postgresql-client
</code></pre></div>
<h3 id="29-prueba-de-acceso-remoto">2.9 Prueba de acceso remoto</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-89-1" id="__codelineno-89-1" name="__codelineno-89-1"></a>vagrant@clientepostgresql:~$ psql -U bibliofilos_admin -h <span class="m">10</span>.0.1.2 -p <span class="m">5432</span> bibliofilos
<a href="#__codelineno-89-2" id="__codelineno-89-2" name="__codelineno-89-2"></a>Password <span class="k">for</span> user bibliofilos_admin:
<a href="#__codelineno-89-3" id="__codelineno-89-3" name="__codelineno-89-3"></a>psql <span class="o">(</span><span class="m">13</span>.8 <span class="o">(</span>Debian <span class="m">13</span>.8-0+deb11u1<span class="o">))</span>
<a href="#__codelineno-89-4" id="__codelineno-89-4" name="__codelineno-89-4"></a>SSL connection <span class="o">(</span>protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: <span class="m">256</span>, compression: off<span class="o">)</span>
<a href="#__codelineno-89-5" id="__codelineno-89-5" name="__codelineno-89-5"></a>Type <span class="s2">"help"</span> <span class="k">for</span> help.
<a href="#__codelineno-89-6" id="__codelineno-89-6" name="__codelineno-89-6"></a>
<a href="#__codelineno-89-7" id="__codelineno-89-7" name="__codelineno-89-7"></a><span class="nv">bibliofilos</span><span class="o">=</span>&gt; <span class="se">\l</span>
<a href="#__codelineno-89-8" id="__codelineno-89-8" name="__codelineno-89-8"></a>                                   List of databases
<a href="#__codelineno-89-9" id="__codelineno-89-9" name="__codelineno-89-9"></a>    Name     <span class="p">|</span>  Owner   <span class="p">|</span> Encoding <span class="p">|</span> Collate <span class="p">|</span>  Ctype  <span class="p">|</span>       Access privileges
<a href="#__codelineno-89-10" id="__codelineno-89-10" name="__codelineno-89-10"></a>-------------+----------+----------+---------+---------+--------------------------------
<a href="#__codelineno-89-11" id="__codelineno-89-11" name="__codelineno-89-11"></a> bibliofilos <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>Tc/postgres                  +
<a href="#__codelineno-89-12" id="__codelineno-89-12" name="__codelineno-89-12"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres         +
<a href="#__codelineno-89-13" id="__codelineno-89-13" name="__codelineno-89-13"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">bibliofilos_admin</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-89-14" id="__codelineno-89-14" name="__codelineno-89-14"></a> postgres    <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span>
<a href="#__codelineno-89-15" id="__codelineno-89-15" name="__codelineno-89-15"></a> template0   <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>c/postgres                   +
<a href="#__codelineno-89-16" id="__codelineno-89-16" name="__codelineno-89-16"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-89-17" id="__codelineno-89-17" name="__codelineno-89-17"></a> template1   <span class="p">|</span> postgres <span class="p">|</span> UTF8     <span class="p">|</span> C.UTF-8 <span class="p">|</span> C.UTF-8 <span class="p">|</span> <span class="o">=</span>c/postgres                   +
<a href="#__codelineno-89-18" id="__codelineno-89-18" name="__codelineno-89-18"></a>             <span class="p">|</span>          <span class="p">|</span>          <span class="p">|</span>         <span class="p">|</span>         <span class="p">|</span> <span class="nv">postgres</span><span class="o">=</span>CTc/postgres
<a href="#__codelineno-89-19" id="__codelineno-89-19" name="__codelineno-89-19"></a><span class="o">(</span><span class="m">4</span> rows<span class="o">)</span>
<a href="#__codelineno-89-20" id="__codelineno-89-20" name="__codelineno-89-20"></a>
<a href="#__codelineno-89-21" id="__codelineno-89-21" name="__codelineno-89-21"></a><span class="nv">bibliofilos</span><span class="o">=</span>&gt; <span class="se">\d</span>t
<a href="#__codelineno-89-22" id="__codelineno-89-22" name="__codelineno-89-22"></a>            List of relations
<a href="#__codelineno-89-23" id="__codelineno-89-23" name="__codelineno-89-23"></a> Schema <span class="p">|</span>     Name     <span class="p">|</span> Type  <span class="p">|</span>  Owner
<a href="#__codelineno-89-24" id="__codelineno-89-24" name="__codelineno-89-24"></a>--------+--------------+-------+----------
<a href="#__codelineno-89-25" id="__codelineno-89-25" name="__codelineno-89-25"></a> public <span class="p">|</span> bibliotecas  <span class="p">|</span> table <span class="p">|</span> postgres
<a href="#__codelineno-89-26" id="__codelineno-89-26" name="__codelineno-89-26"></a> public <span class="p">|</span> libros       <span class="p">|</span> table <span class="p">|</span> postgres
<a href="#__codelineno-89-27" id="__codelineno-89-27" name="__codelineno-89-27"></a> public <span class="p">|</span> trabajadores <span class="p">|</span> table <span class="p">|</span> postgres
<a href="#__codelineno-89-28" id="__codelineno-89-28" name="__codelineno-89-28"></a><span class="o">(</span><span class="m">3</span> rows<span class="o">)</span>
<a href="#__codelineno-89-29" id="__codelineno-89-29" name="__codelineno-89-29"></a>
<a href="#__codelineno-89-30" id="__codelineno-89-30" name="__codelineno-89-30"></a><span class="nv">bibliofilos</span><span class="o">=</span>&gt; <span class="k">select</span> * from bibliotecas<span class="p">;</span>
<a href="#__codelineno-89-31" id="__codelineno-89-31" name="__codelineno-89-31"></a> id <span class="p">|</span>    ciudad    <span class="p">|</span>         calle
<a href="#__codelineno-89-32" id="__codelineno-89-32" name="__codelineno-89-32"></a>----+--------------+-----------------------
<a href="#__codelineno-89-33" id="__codelineno-89-33" name="__codelineno-89-33"></a>  <span class="m">1</span> <span class="p">|</span> Utrera       <span class="p">|</span> Alvarez Quintero
<a href="#__codelineno-89-34" id="__codelineno-89-34" name="__codelineno-89-34"></a>  <span class="m">2</span> <span class="p">|</span> Dos Hermanas <span class="p">|</span> Plaza Huerta Palacios
<a href="#__codelineno-89-35" id="__codelineno-89-35" name="__codelineno-89-35"></a><span class="o">(</span><span class="m">2</span> rows<span class="o">)</span>
</code></pre></div>
<h2 id="3-mariadb">3. MariaDB</h2>
<h3 id="31-instalacion-del-servidor">3.1 Instalación del servidor</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-90-1" id="__codelineno-90-1" name="__codelineno-90-1"></a>sudo apt update
<a href="#__codelineno-90-2" id="__codelineno-90-2" name="__codelineno-90-2"></a>sudo apt install mariadb-server
</code></pre></div>
<p>Compruebo que funciona:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-91-1" id="__codelineno-91-1" name="__codelineno-91-1"></a>vagrant@servidormariadb:~$ sudo systemctl status mariadb
<a href="#__codelineno-91-2" id="__codelineno-91-2" name="__codelineno-91-2"></a>● mariadb.service - MariaDB <span class="m">10</span>.5.15 database server
<a href="#__codelineno-91-3" id="__codelineno-91-3" name="__codelineno-91-3"></a>     Loaded: loaded <span class="o">(</span>/lib/systemd/system/mariadb.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
<a href="#__codelineno-91-4" id="__codelineno-91-4" name="__codelineno-91-4"></a>     Active: active <span class="o">(</span>running<span class="o">)</span> since Wed <span class="m">2022</span>-10-19 <span class="m">11</span>:01:36 UTC<span class="p">;</span> 11min ago
<a href="#__codelineno-91-5" id="__codelineno-91-5" name="__codelineno-91-5"></a>       Docs: man:mariadbd<span class="o">(</span><span class="m">8</span><span class="o">)</span>
<a href="#__codelineno-91-6" id="__codelineno-91-6" name="__codelineno-91-6"></a>             https://mariadb.com/kb/en/library/systemd/
<a href="#__codelineno-91-7" id="__codelineno-91-7" name="__codelineno-91-7"></a>    Process: <span class="m">2111</span> <span class="nv">ExecStartPre</span><span class="o">=</span>/usr/bin/install -m <span class="m">755</span> -o mysql -g root -d /var/run/mysqld <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span><span class="m">0</span>/SUCCESS<span class="o">)</span>
<a href="#__codelineno-91-8" id="__codelineno-91-8" name="__codelineno-91-8"></a>    Process: <span class="m">2112</span> <span class="nv">ExecStartPre</span><span class="o">=</span>/bin/sh -c systemctl unset-environment _WSREP_START_POSITION <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span><span class="m">0</span>/SUCCESS<span class="o">)</span>
<a href="#__codelineno-91-9" id="__codelineno-91-9" name="__codelineno-91-9"></a>    Process: <span class="m">2114</span> <span class="nv">ExecStartPre</span><span class="o">=</span>/bin/sh -c <span class="o">[</span> ! -e /usr/bin/galera_recovery <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nv">VAR</span><span class="o">=</span> <span class="o">||</span>   <span class="nv">VAR</span><span class="o">=</span><span class="sb">`</span><span class="nb">cd</span> /usr/bin/..<span class="p">;</span> /usr/bin/galera_recovery<span class="sb">`</span><span class="p">;</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span>   <span class="o">&amp;&amp;</span> systemctl set-envi&gt;
<a href="#__codelineno-91-10" id="__codelineno-91-10" name="__codelineno-91-10"></a>    Process: <span class="m">2174</span> <span class="nv">ExecStartPost</span><span class="o">=</span>/bin/sh -c systemctl unset-environment _WSREP_START_POSITION <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span><span class="m">0</span>/SUCCESS<span class="o">)</span>
<a href="#__codelineno-91-11" id="__codelineno-91-11" name="__codelineno-91-11"></a>    Process: <span class="m">2176</span> <span class="nv">ExecStartPost</span><span class="o">=</span>/etc/mysql/debian-start <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span><span class="m">0</span>/SUCCESS<span class="o">)</span>
<a href="#__codelineno-91-12" id="__codelineno-91-12" name="__codelineno-91-12"></a>   Main PID: <span class="m">2161</span> <span class="o">(</span>mariadbd<span class="o">)</span>
<a href="#__codelineno-91-13" id="__codelineno-91-13" name="__codelineno-91-13"></a>     Status: <span class="s2">"Taking your SQL requests now..."</span>
<a href="#__codelineno-91-14" id="__codelineno-91-14" name="__codelineno-91-14"></a>      Tasks: <span class="m">8</span> <span class="o">(</span>limit: <span class="m">527</span><span class="o">)</span>
<a href="#__codelineno-91-15" id="__codelineno-91-15" name="__codelineno-91-15"></a>     Memory: <span class="m">61</span>.7M
<a href="#__codelineno-91-16" id="__codelineno-91-16" name="__codelineno-91-16"></a>        CPU: 425ms
<a href="#__codelineno-91-17" id="__codelineno-91-17" name="__codelineno-91-17"></a>     CGroup: /system.slice/mariadb.service
<a href="#__codelineno-91-18" id="__codelineno-91-18" name="__codelineno-91-18"></a>             └─2161 /usr/sbin/mariadbd
<a href="#__codelineno-91-19" id="__codelineno-91-19" name="__codelineno-91-19"></a>
<a href="#__codelineno-91-20" id="__codelineno-91-20" name="__codelineno-91-20"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb mariadbd<span class="o">[</span><span class="m">2161</span><span class="o">]</span>: <span class="m">2022</span>-10-19 <span class="m">11</span>:01:36 <span class="m">0</span> <span class="o">[</span>Note<span class="o">]</span> Server socket created on IP: <span class="s1">'127.0.0.1'</span>.
<a href="#__codelineno-91-21" id="__codelineno-91-21" name="__codelineno-91-21"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb mariadbd<span class="o">[</span><span class="m">2161</span><span class="o">]</span>: <span class="m">2022</span>-10-19 <span class="m">11</span>:01:36 <span class="m">0</span> <span class="o">[</span>Note<span class="o">]</span> InnoDB: Buffer pool<span class="o">(</span>s<span class="o">)</span> load completed at <span class="m">221019</span> <span class="m">11</span>:01:36
<a href="#__codelineno-91-22" id="__codelineno-91-22" name="__codelineno-91-22"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb mariadbd<span class="o">[</span><span class="m">2161</span><span class="o">]</span>: <span class="m">2022</span>-10-19 <span class="m">11</span>:01:36 <span class="m">0</span> <span class="o">[</span>Note<span class="o">]</span> Reading of all Master_info entries succeeded
<a href="#__codelineno-91-23" id="__codelineno-91-23" name="__codelineno-91-23"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb mariadbd<span class="o">[</span><span class="m">2161</span><span class="o">]</span>: <span class="m">2022</span>-10-19 <span class="m">11</span>:01:36 <span class="m">0</span> <span class="o">[</span>Note<span class="o">]</span> Added new Master_info <span class="s1">''</span> to <span class="nb">hash</span> table
<a href="#__codelineno-91-24" id="__codelineno-91-24" name="__codelineno-91-24"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb mariadbd<span class="o">[</span><span class="m">2161</span><span class="o">]</span>: <span class="m">2022</span>-10-19 <span class="m">11</span>:01:36 <span class="m">0</span> <span class="o">[</span>Note<span class="o">]</span> /usr/sbin/mariadbd: ready <span class="k">for</span> connections.
<a href="#__codelineno-91-25" id="__codelineno-91-25" name="__codelineno-91-25"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb mariadbd<span class="o">[</span><span class="m">2161</span><span class="o">]</span>: Version: <span class="s1">'10.5.15-MariaDB-0+deb11u1'</span>  socket: <span class="s1">'/run/mysqld/mysqld.sock'</span>  port: <span class="m">3306</span>  Debian <span class="m">11</span>
<a href="#__codelineno-91-26" id="__codelineno-91-26" name="__codelineno-91-26"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>: Started MariaDB <span class="m">10</span>.5.15 database server.
<a href="#__codelineno-91-27" id="__codelineno-91-27" name="__codelineno-91-27"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb /etc/mysql/debian-start<span class="o">[</span><span class="m">2178</span><span class="o">]</span>: Upgrading MySQL tables <span class="k">if</span> necessary.
<a href="#__codelineno-91-28" id="__codelineno-91-28" name="__codelineno-91-28"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb /etc/mysql/debian-start<span class="o">[</span><span class="m">2189</span><span class="o">]</span>: Checking <span class="k">for</span> insecure root accounts.
<a href="#__codelineno-91-29" id="__codelineno-91-29" name="__codelineno-91-29"></a>Oct <span class="m">19</span> <span class="m">11</span>:01:36 servidormariadb /etc/mysql/debian-start<span class="o">[</span><span class="m">2193</span><span class="o">]</span>: Triggering myisam-recover <span class="k">for</span> all MyISAM tables and aria-recover <span class="k">for</span> all Aria tables
</code></pre></div>
<h3 id="32-acceso-local-privilegiado">3.2 Acceso local privilegiado</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-92-1" id="__codelineno-92-1" name="__codelineno-92-1"></a>vagrant@servidormariadb:~$ sudo mariadb
<a href="#__codelineno-92-2" id="__codelineno-92-2" name="__codelineno-92-2"></a>Welcome to the MariaDB monitor.  Commands end with <span class="p">;</span> or <span class="se">\g</span>.
<a href="#__codelineno-92-3" id="__codelineno-92-3" name="__codelineno-92-3"></a>Your MariaDB connection id is <span class="m">31</span>
<a href="#__codelineno-92-4" id="__codelineno-92-4" name="__codelineno-92-4"></a>Server version: <span class="m">10</span>.5.15-MariaDB-0+deb11u1 Debian <span class="m">11</span>
<a href="#__codelineno-92-5" id="__codelineno-92-5" name="__codelineno-92-5"></a>
<a href="#__codelineno-92-6" id="__codelineno-92-6" name="__codelineno-92-6"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">2000</span>, <span class="m">2018</span>, Oracle, MariaDB Corporation Ab and others.
<a href="#__codelineno-92-7" id="__codelineno-92-7" name="__codelineno-92-7"></a>
<a href="#__codelineno-92-8" id="__codelineno-92-8" name="__codelineno-92-8"></a>Type <span class="s1">'help;'</span> or <span class="s1">'\h'</span> <span class="k">for</span> help. Type <span class="s1">'\c'</span> to clear the current input statement.
<a href="#__codelineno-92-9" id="__codelineno-92-9" name="__codelineno-92-9"></a>
<a href="#__codelineno-92-10" id="__codelineno-92-10" name="__codelineno-92-10"></a>MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt;
</code></pre></div>
<h3 id="33-creacion-de-la-base-de-datos">3.3 Creación de la base de datos</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-93-1" id="__codelineno-93-1" name="__codelineno-93-1"></a><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">bibliofilos</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se ha creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-94-1" id="__codelineno-94-1" name="__codelineno-94-1"></a>MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; show databases<span class="p">;</span>
<a href="#__codelineno-94-2" id="__codelineno-94-2" name="__codelineno-94-2"></a>+--------------------+
<a href="#__codelineno-94-3" id="__codelineno-94-3" name="__codelineno-94-3"></a><span class="p">|</span> Database           <span class="p">|</span>
<a href="#__codelineno-94-4" id="__codelineno-94-4" name="__codelineno-94-4"></a>+--------------------+
<a href="#__codelineno-94-5" id="__codelineno-94-5" name="__codelineno-94-5"></a><span class="p">|</span> bibliofilos        <span class="p">|</span>
<a href="#__codelineno-94-6" id="__codelineno-94-6" name="__codelineno-94-6"></a><span class="p">|</span> information_schema <span class="p">|</span>
<a href="#__codelineno-94-7" id="__codelineno-94-7" name="__codelineno-94-7"></a><span class="p">|</span> mysql              <span class="p">|</span>
<a href="#__codelineno-94-8" id="__codelineno-94-8" name="__codelineno-94-8"></a><span class="p">|</span> performance_schema <span class="p">|</span>
<a href="#__codelineno-94-9" id="__codelineno-94-9" name="__codelineno-94-9"></a>+--------------------+
<a href="#__codelineno-94-10" id="__codelineno-94-10" name="__codelineno-94-10"></a><span class="m">4</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.000 sec<span class="o">)</span>
</code></pre></div>
<p>Me conecto:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-95-1" id="__codelineno-95-1" name="__codelineno-95-1"></a>MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; use bibliofilos<span class="p">;</span>
<a href="#__codelineno-95-2" id="__codelineno-95-2" name="__codelineno-95-2"></a>Database changed
<a href="#__codelineno-95-3" id="__codelineno-95-3" name="__codelineno-95-3"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt;
</code></pre></div>
<h3 id="34-creacion-de-tablas">3.4 Creación de tablas</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-96-1" id="__codelineno-96-1" name="__codelineno-96-1"></a><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">bibliotecas</span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-96-2" id="__codelineno-96-2" name="__codelineno-96-2"></a><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-3" id="__codelineno-96-3" name="__codelineno-96-3"></a><span class="w">  </span><span class="n">ciudad</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-4" id="__codelineno-96-4" name="__codelineno-96-4"></a><span class="w">  </span><span class="n">calle</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-5" id="__codelineno-96-5" name="__codelineno-96-5"></a><span class="w">  </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-96-6" id="__codelineno-96-6" name="__codelineno-96-6"></a><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-96-7" id="__codelineno-96-7" name="__codelineno-96-7"></a>
<a href="#__codelineno-96-8" id="__codelineno-96-8" name="__codelineno-96-8"></a><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">libros</span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-96-9" id="__codelineno-96-9" name="__codelineno-96-9"></a><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-10" id="__codelineno-96-10" name="__codelineno-96-10"></a><span class="w">  </span><span class="n">id_biblioteca</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-11" id="__codelineno-96-11" name="__codelineno-96-11"></a><span class="w">  </span><span class="n">n_paginas</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-12" id="__codelineno-96-12" name="__codelineno-96-12"></a><span class="w">  </span><span class="n">autor</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-13" id="__codelineno-96-13" name="__codelineno-96-13"></a><span class="w">  </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"></span>
<a href="#__codelineno-96-14" id="__codelineno-96-14" name="__codelineno-96-14"></a><span class="w">  </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-96-15" id="__codelineno-96-15" name="__codelineno-96-15"></a><span class="w">    </span><span class="k">references</span><span class="w"> </span><span class="n">bibliotecas</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-96-16" id="__codelineno-96-16" name="__codelineno-96-16"></a><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-96-17" id="__codelineno-96-17" name="__codelineno-96-17"></a>
<a href="#__codelineno-96-18" id="__codelineno-96-18" name="__codelineno-96-18"></a><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">trabajadores</span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-96-19" id="__codelineno-96-19" name="__codelineno-96-19"></a><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-20" id="__codelineno-96-20" name="__codelineno-96-20"></a><span class="w">  </span><span class="n">id_biblioteca</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-21" id="__codelineno-96-21" name="__codelineno-96-21"></a><span class="w">  </span><span class="n">nombre</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-22" id="__codelineno-96-22" name="__codelineno-96-22"></a><span class="w">  </span><span class="n">apellido</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-96-23" id="__codelineno-96-23" name="__codelineno-96-23"></a><span class="w">  </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"></span>
<a href="#__codelineno-96-24" id="__codelineno-96-24" name="__codelineno-96-24"></a><span class="w">  </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-96-25" id="__codelineno-96-25" name="__codelineno-96-25"></a><span class="w">    </span><span class="k">references</span><span class="w"> </span><span class="n">bibliotecas</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-96-26" id="__codelineno-96-26" name="__codelineno-96-26"></a><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-97-1" id="__codelineno-97-1" name="__codelineno-97-1"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt; show tables<span class="p">;</span>
<a href="#__codelineno-97-2" id="__codelineno-97-2" name="__codelineno-97-2"></a>+-----------------------+
<a href="#__codelineno-97-3" id="__codelineno-97-3" name="__codelineno-97-3"></a><span class="p">|</span> Tables_in_bibliofilos <span class="p">|</span>
<a href="#__codelineno-97-4" id="__codelineno-97-4" name="__codelineno-97-4"></a>+-----------------------+
<a href="#__codelineno-97-5" id="__codelineno-97-5" name="__codelineno-97-5"></a><span class="p">|</span> bibliotecas           <span class="p">|</span>
<a href="#__codelineno-97-6" id="__codelineno-97-6" name="__codelineno-97-6"></a><span class="p">|</span> libros                <span class="p">|</span>
<a href="#__codelineno-97-7" id="__codelineno-97-7" name="__codelineno-97-7"></a><span class="p">|</span> trabajadores          <span class="p">|</span>
<a href="#__codelineno-97-8" id="__codelineno-97-8" name="__codelineno-97-8"></a>+-----------------------+
<a href="#__codelineno-97-9" id="__codelineno-97-9" name="__codelineno-97-9"></a><span class="m">3</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.001 sec<span class="o">)</span>
</code></pre></div>
<h3 id="35-insercion-de-registros">3.5 Inserción de registros</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-98-1" id="__codelineno-98-1" name="__codelineno-98-1"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">'Utrera'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Alvarez Quintero'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-98-2" id="__codelineno-98-2" name="__codelineno-98-2"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">bibliotecas</span><span class="w"> </span><span class="p">(</span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">'Dos Hermanas'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Plaza Huerta Palacios'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-98-3" id="__codelineno-98-3" name="__codelineno-98-3"></a>
<a href="#__codelineno-98-4" id="__codelineno-98-4" name="__codelineno-98-4"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">libros</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="s1">'Dale Carnegie'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-98-5" id="__codelineno-98-5" name="__codelineno-98-5"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">libros</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">714</span><span class="p">,</span><span class="w"> </span><span class="s1">'Anne Frank'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-98-6" id="__codelineno-98-6" name="__codelineno-98-6"></a>
<a href="#__codelineno-98-7" id="__codelineno-98-7" name="__codelineno-98-7"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'Pepe'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Pepito'</span><span class="p">);</span><span class="w"></span>
<a href="#__codelineno-98-8" id="__codelineno-98-8" name="__codelineno-98-8"></a><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">trabajadores</span><span class="w"> </span><span class="p">(</span><span class="n">id_biblioteca</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">'Jose'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Joselito'</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han añadido:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-99-1" id="__codelineno-99-1" name="__codelineno-99-1"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt; <span class="k">select</span> * from bibliotecas<span class="p">;</span>
<a href="#__codelineno-99-2" id="__codelineno-99-2" name="__codelineno-99-2"></a>+----+--------------+-----------------------+
<a href="#__codelineno-99-3" id="__codelineno-99-3" name="__codelineno-99-3"></a><span class="p">|</span> id <span class="p">|</span> ciudad       <span class="p">|</span> calle                 <span class="p">|</span>
<a href="#__codelineno-99-4" id="__codelineno-99-4" name="__codelineno-99-4"></a>+----+--------------+-----------------------+
<a href="#__codelineno-99-5" id="__codelineno-99-5" name="__codelineno-99-5"></a><span class="p">|</span>  <span class="m">1</span> <span class="p">|</span> Utrera       <span class="p">|</span> Alvarez Quintero      <span class="p">|</span>
<a href="#__codelineno-99-6" id="__codelineno-99-6" name="__codelineno-99-6"></a><span class="p">|</span>  <span class="m">2</span> <span class="p">|</span> Dos Hermanas <span class="p">|</span> Plaza Huerta Palacios <span class="p">|</span>
<a href="#__codelineno-99-7" id="__codelineno-99-7" name="__codelineno-99-7"></a>+----+--------------+-----------------------+
<a href="#__codelineno-99-8" id="__codelineno-99-8" name="__codelineno-99-8"></a><span class="m">2</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.001 sec<span class="o">)</span>
<a href="#__codelineno-99-9" id="__codelineno-99-9" name="__codelineno-99-9"></a>
<a href="#__codelineno-99-10" id="__codelineno-99-10" name="__codelineno-99-10"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt; <span class="k">select</span> * from libros<span class="p">;</span>
<a href="#__codelineno-99-11" id="__codelineno-99-11" name="__codelineno-99-11"></a>+----+---------------+-----------+---------------+
<a href="#__codelineno-99-12" id="__codelineno-99-12" name="__codelineno-99-12"></a><span class="p">|</span> id <span class="p">|</span> id_biblioteca <span class="p">|</span> n_paginas <span class="p">|</span> autor         <span class="p">|</span>
<a href="#__codelineno-99-13" id="__codelineno-99-13" name="__codelineno-99-13"></a>+----+---------------+-----------+---------------+
<a href="#__codelineno-99-14" id="__codelineno-99-14" name="__codelineno-99-14"></a><span class="p">|</span>  <span class="m">1</span> <span class="p">|</span>             <span class="m">1</span> <span class="p">|</span>       <span class="m">320</span> <span class="p">|</span> Dale Carnegie <span class="p">|</span>
<a href="#__codelineno-99-15" id="__codelineno-99-15" name="__codelineno-99-15"></a><span class="p">|</span>  <span class="m">2</span> <span class="p">|</span>             <span class="m">2</span> <span class="p">|</span>       <span class="m">714</span> <span class="p">|</span> Anne Frank    <span class="p">|</span>
<a href="#__codelineno-99-16" id="__codelineno-99-16" name="__codelineno-99-16"></a>+----+---------------+-----------+---------------+
<a href="#__codelineno-99-17" id="__codelineno-99-17" name="__codelineno-99-17"></a><span class="m">2</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.001 sec<span class="o">)</span>
<a href="#__codelineno-99-18" id="__codelineno-99-18" name="__codelineno-99-18"></a>
<a href="#__codelineno-99-19" id="__codelineno-99-19" name="__codelineno-99-19"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt; <span class="k">select</span> * from trabajadores<span class="p">;</span>
<a href="#__codelineno-99-20" id="__codelineno-99-20" name="__codelineno-99-20"></a>+----+---------------+--------+----------+
<a href="#__codelineno-99-21" id="__codelineno-99-21" name="__codelineno-99-21"></a><span class="p">|</span> id <span class="p">|</span> id_biblioteca <span class="p">|</span> nombre <span class="p">|</span> apellido <span class="p">|</span>
<a href="#__codelineno-99-22" id="__codelineno-99-22" name="__codelineno-99-22"></a>+----+---------------+--------+----------+
<a href="#__codelineno-99-23" id="__codelineno-99-23" name="__codelineno-99-23"></a><span class="p">|</span>  <span class="m">1</span> <span class="p">|</span>             <span class="m">1</span> <span class="p">|</span> Pepe   <span class="p">|</span> Pepito   <span class="p">|</span>
<a href="#__codelineno-99-24" id="__codelineno-99-24" name="__codelineno-99-24"></a><span class="p">|</span>  <span class="m">2</span> <span class="p">|</span>             <span class="m">2</span> <span class="p">|</span> Jose   <span class="p">|</span> Joselito <span class="p">|</span>
<a href="#__codelineno-99-25" id="__codelineno-99-25" name="__codelineno-99-25"></a>+----+---------------+--------+----------+
<a href="#__codelineno-99-26" id="__codelineno-99-26" name="__codelineno-99-26"></a><span class="m">2</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.001 sec<span class="o">)</span>
</code></pre></div>
<h3 id="36-creacion-de-usuarios">3.6 Creación de usuarios</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-100-1" id="__codelineno-100-1" name="__codelineno-100-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">'bibliofilos_admin'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">'1234'</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-100-2" id="__codelineno-100-2" name="__codelineno-100-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">'bibliofilos_admin'</span><span class="o">@</span><span class="s1">'%'</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">'1234'</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-101-1" id="__codelineno-101-1" name="__codelineno-101-1"></a>MariaDB <span class="o">[(</span>none<span class="o">)]</span>&gt; SELECT user, host FROM mysql.user<span class="p">;</span>
<a href="#__codelineno-101-2" id="__codelineno-101-2" name="__codelineno-101-2"></a>+-------------------+-----------+
<a href="#__codelineno-101-3" id="__codelineno-101-3" name="__codelineno-101-3"></a><span class="p">|</span> User              <span class="p">|</span> Host      <span class="p">|</span>
<a href="#__codelineno-101-4" id="__codelineno-101-4" name="__codelineno-101-4"></a>+-------------------+-----------+
<a href="#__codelineno-101-5" id="__codelineno-101-5" name="__codelineno-101-5"></a><span class="p">|</span> bibliofilos_admin <span class="p">|</span> %         <span class="p">|</span>
<a href="#__codelineno-101-6" id="__codelineno-101-6" name="__codelineno-101-6"></a><span class="p">|</span> bibliofilos_admin <span class="p">|</span> localhost <span class="p">|</span>
<a href="#__codelineno-101-7" id="__codelineno-101-7" name="__codelineno-101-7"></a><span class="p">|</span> mariadb.sys       <span class="p">|</span> localhost <span class="p">|</span>
<a href="#__codelineno-101-8" id="__codelineno-101-8" name="__codelineno-101-8"></a><span class="p">|</span> mysql             <span class="p">|</span> localhost <span class="p">|</span>
<a href="#__codelineno-101-9" id="__codelineno-101-9" name="__codelineno-101-9"></a><span class="p">|</span> root              <span class="p">|</span> localhost <span class="p">|</span>
<a href="#__codelineno-101-10" id="__codelineno-101-10" name="__codelineno-101-10"></a>+-------------------+-----------+
<a href="#__codelineno-101-11" id="__codelineno-101-11" name="__codelineno-101-11"></a><span class="m">5</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.002 sec<span class="o">)</span>
</code></pre></div>
<p>Les doy privilegios:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-102-1" id="__codelineno-102-1" name="__codelineno-102-1"></a><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">bibliofilos</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">'bibliofilos_admin'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-102-2" id="__codelineno-102-2" name="__codelineno-102-2"></a><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">bibliofilos</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">'bibliofilos_admin'</span><span class="o">@</span><span class="s1">'%'</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-102-3" id="__codelineno-102-3" name="__codelineno-102-3"></a><span class="n">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Muestro que se han aplicado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-103-1" id="__codelineno-103-1" name="__codelineno-103-1"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">GRANTS</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="s1">'bibliofilos_admin'</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-103-2" id="__codelineno-103-2" name="__codelineno-103-2"></a><span class="o">+</span><span class="c1">------------------------------------------------------------------------------------------------------------------+</span>
<a href="#__codelineno-103-3" id="__codelineno-103-3" name="__codelineno-103-3"></a><span class="o">|</span><span class="w"> </span><span class="n">Grants</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="o">@%</span><span class="w">                                                                                   </span><span class="o">|</span><span class="w"></span>
<a href="#__codelineno-103-4" id="__codelineno-103-4" name="__codelineno-103-4"></a><span class="o">+</span><span class="c1">------------------------------------------------------------------------------------------------------------------+</span>
<a href="#__codelineno-103-5" id="__codelineno-103-5" name="__codelineno-103-5"></a><span class="o">|</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">USAGE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="o">`</span><span class="n">bibliofilos_admin</span><span class="o">`@`%`</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">'*A4B6157319038724E3560894F7F932C8886EBFCF'</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<a href="#__codelineno-103-6" id="__codelineno-103-6" name="__codelineno-103-6"></a><span class="o">|</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="o">`</span><span class="n">bibliofilos</span><span class="o">`</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="o">`</span><span class="n">bibliofilos_admin</span><span class="o">`@`%`</span><span class="w">                                               </span><span class="o">|</span><span class="w"></span>
<a href="#__codelineno-103-7" id="__codelineno-103-7" name="__codelineno-103-7"></a><span class="o">+</span><span class="c1">------------------------------------------------------------------------------------------------------------------+</span>
<a href="#__codelineno-103-8" id="__codelineno-103-8" name="__codelineno-103-8"></a><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-103-9" id="__codelineno-103-9" name="__codelineno-103-9"></a>
<a href="#__codelineno-103-10" id="__codelineno-103-10" name="__codelineno-103-10"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">GRANTS</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="s1">'bibliofilos_admin'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-103-11" id="__codelineno-103-11" name="__codelineno-103-11"></a><span class="o">+</span><span class="c1">--------------------------------------------------------------------------------------------------------------------------+</span>
<a href="#__codelineno-103-12" id="__codelineno-103-12" name="__codelineno-103-12"></a><span class="o">|</span><span class="w"> </span><span class="n">Grants</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">bibliofilos_admin</span><span class="o">@</span><span class="n">localhost</span><span class="w">                                                                                   </span><span class="o">|</span><span class="w"></span>
<a href="#__codelineno-103-13" id="__codelineno-103-13" name="__codelineno-103-13"></a><span class="o">+</span><span class="c1">--------------------------------------------------------------------------------------------------------------------------+</span>
<a href="#__codelineno-103-14" id="__codelineno-103-14" name="__codelineno-103-14"></a><span class="o">|</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">USAGE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="o">`</span><span class="n">bibliofilos_admin</span><span class="o">`@`</span><span class="n">localhost</span><span class="o">`</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="s1">'*A4B6157319038724E3560894F7F932C8886EBFCF'</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<a href="#__codelineno-103-15" id="__codelineno-103-15" name="__codelineno-103-15"></a><span class="o">|</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="o">`</span><span class="n">bibliofilos</span><span class="o">`</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="o">`</span><span class="n">bibliofilos_admin</span><span class="o">`@`</span><span class="n">localhost</span><span class="o">`</span><span class="w">                                               </span><span class="o">|</span><span class="w"></span>
<a href="#__codelineno-103-16" id="__codelineno-103-16" name="__codelineno-103-16"></a><span class="o">+</span><span class="c1">--------------------------------------------------------------------------------------------------------------------------+</span>
<a href="#__codelineno-103-17" id="__codelineno-103-17" name="__codelineno-103-17"></a><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">000</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="37-configuracion-del-acceso-remoto">3.7 Configuración del acceso remoto</h3>
<p>Modifico la siguiente línea en <code>/etc/mysql/mariadb.conf.d/50-server.cnf</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-104-1" id="__codelineno-104-1" name="__codelineno-104-1"></a>bind-address            <span class="o">=</span> <span class="m">0</span>.0.0.0
</code></pre></div>
<p>Reinicio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-105-1" id="__codelineno-105-1" name="__codelineno-105-1"></a>sudo systemctl restart mariadb
</code></pre></div>
<p>Pruebo que el cambio se aplicó:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-106-1" id="__codelineno-106-1" name="__codelineno-106-1"></a>vagrant@servidormariadb:~$ netstat -ant <span class="p">|</span> grep <span class="m">3306</span>
<a href="#__codelineno-106-2" id="__codelineno-106-2" name="__codelineno-106-2"></a>tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">0</span>.0.0.0:3306            <span class="m">0</span>.0.0.0:*               LISTEN
</code></pre></div>
<h3 id="38-instalacion-del-cliente">3.8 Instalación del cliente</h3>
<p>Se hará sobre <code>clientemariadb</code>.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-107-1" id="__codelineno-107-1" name="__codelineno-107-1"></a>sudo apt update
<a href="#__codelineno-107-2" id="__codelineno-107-2" name="__codelineno-107-2"></a>sudo apt install mariadb-client
</code></pre></div>
<h3 id="39-prueba-de-acceso-remoto">3.9 Prueba de acceso remoto</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-108-1" id="__codelineno-108-1" name="__codelineno-108-1"></a>vagrant@clientemariadb:~$ mariadb -u bibliofilos_admin -h <span class="m">10</span>.0.2.2 -p bibliofilos
<a href="#__codelineno-108-2" id="__codelineno-108-2" name="__codelineno-108-2"></a>Enter password:
<a href="#__codelineno-108-3" id="__codelineno-108-3" name="__codelineno-108-3"></a>Reading table information <span class="k">for</span> completion of table and column names
<a href="#__codelineno-108-4" id="__codelineno-108-4" name="__codelineno-108-4"></a>You can turn off this feature to get a quicker startup with -A
<a href="#__codelineno-108-5" id="__codelineno-108-5" name="__codelineno-108-5"></a>
<a href="#__codelineno-108-6" id="__codelineno-108-6" name="__codelineno-108-6"></a>Welcome to the MariaDB monitor.  Commands end with <span class="p">;</span> or <span class="se">\g</span>.
<a href="#__codelineno-108-7" id="__codelineno-108-7" name="__codelineno-108-7"></a>Your MariaDB connection id is <span class="m">35</span>
<a href="#__codelineno-108-8" id="__codelineno-108-8" name="__codelineno-108-8"></a>Server version: <span class="m">10</span>.5.15-MariaDB-0+deb11u1 Debian <span class="m">11</span>
<a href="#__codelineno-108-9" id="__codelineno-108-9" name="__codelineno-108-9"></a>
<a href="#__codelineno-108-10" id="__codelineno-108-10" name="__codelineno-108-10"></a>Copyright <span class="o">(</span>c<span class="o">)</span> <span class="m">2000</span>, <span class="m">2018</span>, Oracle, MariaDB Corporation Ab and others.
<a href="#__codelineno-108-11" id="__codelineno-108-11" name="__codelineno-108-11"></a>
<a href="#__codelineno-108-12" id="__codelineno-108-12" name="__codelineno-108-12"></a>Type <span class="s1">'help;'</span> or <span class="s1">'\h'</span> <span class="k">for</span> help. Type <span class="s1">'\c'</span> to clear the current input statement.
<a href="#__codelineno-108-13" id="__codelineno-108-13" name="__codelineno-108-13"></a>
<a href="#__codelineno-108-14" id="__codelineno-108-14" name="__codelineno-108-14"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt; show databases<span class="p">;</span>
<a href="#__codelineno-108-15" id="__codelineno-108-15" name="__codelineno-108-15"></a>+--------------------+
<a href="#__codelineno-108-16" id="__codelineno-108-16" name="__codelineno-108-16"></a><span class="p">|</span> Database           <span class="p">|</span>
<a href="#__codelineno-108-17" id="__codelineno-108-17" name="__codelineno-108-17"></a>+--------------------+
<a href="#__codelineno-108-18" id="__codelineno-108-18" name="__codelineno-108-18"></a><span class="p">|</span> bibliofilos        <span class="p">|</span>
<a href="#__codelineno-108-19" id="__codelineno-108-19" name="__codelineno-108-19"></a><span class="p">|</span> information_schema <span class="p">|</span>
<a href="#__codelineno-108-20" id="__codelineno-108-20" name="__codelineno-108-20"></a>+--------------------+
<a href="#__codelineno-108-21" id="__codelineno-108-21" name="__codelineno-108-21"></a><span class="m">2</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.002 sec<span class="o">)</span>
<a href="#__codelineno-108-22" id="__codelineno-108-22" name="__codelineno-108-22"></a>
<a href="#__codelineno-108-23" id="__codelineno-108-23" name="__codelineno-108-23"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt; show tables<span class="p">;</span>
<a href="#__codelineno-108-24" id="__codelineno-108-24" name="__codelineno-108-24"></a>+-----------------------+
<a href="#__codelineno-108-25" id="__codelineno-108-25" name="__codelineno-108-25"></a><span class="p">|</span> Tables_in_bibliofilos <span class="p">|</span>
<a href="#__codelineno-108-26" id="__codelineno-108-26" name="__codelineno-108-26"></a>+-----------------------+
<a href="#__codelineno-108-27" id="__codelineno-108-27" name="__codelineno-108-27"></a><span class="p">|</span> bibliotecas           <span class="p">|</span>
<a href="#__codelineno-108-28" id="__codelineno-108-28" name="__codelineno-108-28"></a><span class="p">|</span> libros                <span class="p">|</span>
<a href="#__codelineno-108-29" id="__codelineno-108-29" name="__codelineno-108-29"></a><span class="p">|</span> trabajadores          <span class="p">|</span>
<a href="#__codelineno-108-30" id="__codelineno-108-30" name="__codelineno-108-30"></a>+-----------------------+
<a href="#__codelineno-108-31" id="__codelineno-108-31" name="__codelineno-108-31"></a><span class="m">3</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.001 sec<span class="o">)</span>
<a href="#__codelineno-108-32" id="__codelineno-108-32" name="__codelineno-108-32"></a>
<a href="#__codelineno-108-33" id="__codelineno-108-33" name="__codelineno-108-33"></a>MariaDB <span class="o">[</span>bibliofilos<span class="o">]</span>&gt; <span class="k">select</span> * from bibliotecas<span class="p">;</span>
<a href="#__codelineno-108-34" id="__codelineno-108-34" name="__codelineno-108-34"></a>+----+--------------+-----------------------+
<a href="#__codelineno-108-35" id="__codelineno-108-35" name="__codelineno-108-35"></a><span class="p">|</span> id <span class="p">|</span> ciudad       <span class="p">|</span> calle                 <span class="p">|</span>
<a href="#__codelineno-108-36" id="__codelineno-108-36" name="__codelineno-108-36"></a>+----+--------------+-----------------------+
<a href="#__codelineno-108-37" id="__codelineno-108-37" name="__codelineno-108-37"></a><span class="p">|</span>  <span class="m">1</span> <span class="p">|</span> Utrera       <span class="p">|</span> Alvarez Quintero      <span class="p">|</span>
<a href="#__codelineno-108-38" id="__codelineno-108-38" name="__codelineno-108-38"></a><span class="p">|</span>  <span class="m">2</span> <span class="p">|</span> Dos Hermanas <span class="p">|</span> Plaza Huerta Palacios <span class="p">|</span>
<a href="#__codelineno-108-39" id="__codelineno-108-39" name="__codelineno-108-39"></a>+----+--------------+-----------------------+
<a href="#__codelineno-108-40" id="__codelineno-108-40" name="__codelineno-108-40"></a><span class="m">2</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.002 sec<span class="o">)</span>
</code></pre></div>
<h2 id="4-mongodb">4. MongoDB</h2>
<h3 id="41-instalacion-del-servidor">4.1 Instalación del servidor</h3>
<p>Añado el repositorio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-109-1" id="__codelineno-109-1" name="__codelineno-109-1"></a><span class="nb">echo</span> <span class="s2">"deb http://repo.mongodb.org/apt/debian bullseye/mongodb-org/5.0 main"</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list
</code></pre></div>
<p>Añado la clave GPG:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-110-1" id="__codelineno-110-1" name="__codelineno-110-1"></a>curl -sSL https://www.mongodb.org/static/pgp/server-5.0.asc  -o mongoserver.asc
<a href="#__codelineno-110-2" id="__codelineno-110-2" name="__codelineno-110-2"></a>gpg --no-default-keyring --keyring ./mongo_key_temp.gpg --import ./mongoserver.asc
<a href="#__codelineno-110-3" id="__codelineno-110-3" name="__codelineno-110-3"></a>gpg --no-default-keyring --keyring ./mongo_key_temp.gpg --export &gt; ./mongoserver_key.gpg
<a href="#__codelineno-110-4" id="__codelineno-110-4" name="__codelineno-110-4"></a>sudo mv mongoserver_key.gpg /etc/apt/trusted.gpg.d/
</code></pre></div>
<p>Actualizo:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-111-1" id="__codelineno-111-1" name="__codelineno-111-1"></a>sudo apt update
</code></pre></div>
<p>Instalo:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-112-1" id="__codelineno-112-1" name="__codelineno-112-1"></a>sudo apt install mongodb-org
</code></pre></div>
<p>Inicio el servidor:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-113-1" id="__codelineno-113-1" name="__codelineno-113-1"></a>sudo systemctl <span class="nb">enable</span> --now mongod
</code></pre></div>
<p>Compruebo que funciona:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-114-1" id="__codelineno-114-1" name="__codelineno-114-1"></a>vagrant@servidormongodb:~$ sudo systemctl status mongod
<a href="#__codelineno-114-2" id="__codelineno-114-2" name="__codelineno-114-2"></a>● mongod.service - MongoDB Database Server
<a href="#__codelineno-114-3" id="__codelineno-114-3" name="__codelineno-114-3"></a>     Loaded: loaded <span class="o">(</span>/lib/systemd/system/mongod.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
<a href="#__codelineno-114-4" id="__codelineno-114-4" name="__codelineno-114-4"></a>     Active: active <span class="o">(</span>running<span class="o">)</span> since Thu <span class="m">2022</span>-10-20 <span class="m">08</span>:20:59 UTC<span class="p">;</span> 2min 26s ago
<a href="#__codelineno-114-5" id="__codelineno-114-5" name="__codelineno-114-5"></a>       Docs: https://docs.mongodb.org/manual
<a href="#__codelineno-114-6" id="__codelineno-114-6" name="__codelineno-114-6"></a>   Main PID: <span class="m">2695</span> <span class="o">(</span>mongod<span class="o">)</span>
<a href="#__codelineno-114-7" id="__codelineno-114-7" name="__codelineno-114-7"></a>     Memory: <span class="m">120</span>.9M
<a href="#__codelineno-114-8" id="__codelineno-114-8" name="__codelineno-114-8"></a>        CPU: <span class="m">1</span>.866s
<a href="#__codelineno-114-9" id="__codelineno-114-9" name="__codelineno-114-9"></a>     CGroup: /system.slice/mongod.service
<a href="#__codelineno-114-10" id="__codelineno-114-10" name="__codelineno-114-10"></a>             └─2695 /usr/bin/mongod --config /etc/mongod.conf
<a href="#__codelineno-114-11" id="__codelineno-114-11" name="__codelineno-114-11"></a>
<a href="#__codelineno-114-12" id="__codelineno-114-12" name="__codelineno-114-12"></a>Oct <span class="m">20</span> <span class="m">08</span>:20:59 servidormongodb systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>: Started MongoDB Database Server.
</code></pre></div>
<h3 id="42-acceso-local-privilegiado">4.2 Acceso local privilegiado</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-115-1" id="__codelineno-115-1" name="__codelineno-115-1"></a>vagrant@servidormongodb:~$ mongosh
<a href="#__codelineno-115-2" id="__codelineno-115-2" name="__codelineno-115-2"></a>Current Mongosh Log ID:63510a480bb54d2af15cd761
<a href="#__codelineno-115-3" id="__codelineno-115-3" name="__codelineno-115-3"></a>Connecting to:          mongodb://127.0.0.1:27017/?directConnection<span class="o">=</span>true<span class="p">&amp;</span><span class="nv">serverSelectionTimeoutMS</span><span class="o">=</span><span class="m">2000</span><span class="p">&amp;</span><span class="nv">appName</span><span class="o">=</span>mongosh+1.6.0
<a href="#__codelineno-115-4" id="__codelineno-115-4" name="__codelineno-115-4"></a>Using MongoDB:          <span class="m">5</span>.0.13
<a href="#__codelineno-115-5" id="__codelineno-115-5" name="__codelineno-115-5"></a>Using Mongosh:          <span class="m">1</span>.6.0
<a href="#__codelineno-115-6" id="__codelineno-115-6" name="__codelineno-115-6"></a>
<a href="#__codelineno-115-7" id="__codelineno-115-7" name="__codelineno-115-7"></a>For mongosh info see: https://docs.mongodb.com/mongodb-shell/
<a href="#__codelineno-115-8" id="__codelineno-115-8" name="__codelineno-115-8"></a>
<a href="#__codelineno-115-9" id="__codelineno-115-9" name="__codelineno-115-9"></a>------
<a href="#__codelineno-115-10" id="__codelineno-115-10" name="__codelineno-115-10"></a>   The server generated these startup warnings when booting
<a href="#__codelineno-115-11" id="__codelineno-115-11" name="__codelineno-115-11"></a>   <span class="m">2022</span>-10-20T08:21:00.034+00:00: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem
<a href="#__codelineno-115-12" id="__codelineno-115-12" name="__codelineno-115-12"></a>   <span class="m">2022</span>-10-20T08:21:00.617+00:00: Access control is not enabled <span class="k">for</span> the database. Read and write access to data and configuration is unrestricted
<a href="#__codelineno-115-13" id="__codelineno-115-13" name="__codelineno-115-13"></a>------
<a href="#__codelineno-115-14" id="__codelineno-115-14" name="__codelineno-115-14"></a>
<a href="#__codelineno-115-15" id="__codelineno-115-15" name="__codelineno-115-15"></a>------
<a href="#__codelineno-115-16" id="__codelineno-115-16" name="__codelineno-115-16"></a>   Enable MongoDB<span class="err">'</span>s free cloud-based monitoring service, which will <span class="k">then</span> receive and display
<a href="#__codelineno-115-17" id="__codelineno-115-17" name="__codelineno-115-17"></a>   metrics about your deployment <span class="o">(</span>disk utilization, CPU, operation statistics, etc<span class="o">)</span>.
<a href="#__codelineno-115-18" id="__codelineno-115-18" name="__codelineno-115-18"></a>
<a href="#__codelineno-115-19" id="__codelineno-115-19" name="__codelineno-115-19"></a>   The monitoring data will be available on a MongoDB website with a unique URL accessible to you
<a href="#__codelineno-115-20" id="__codelineno-115-20" name="__codelineno-115-20"></a>   and anyone you share the URL with. MongoDB may use this information to make product
<a href="#__codelineno-115-21" id="__codelineno-115-21" name="__codelineno-115-21"></a>   improvements and to suggest MongoDB products and deployment options to you.
<a href="#__codelineno-115-22" id="__codelineno-115-22" name="__codelineno-115-22"></a>
<a href="#__codelineno-115-23" id="__codelineno-115-23" name="__codelineno-115-23"></a>   To <span class="nb">enable</span> free monitoring, run the following command: db.enableFreeMonitoring<span class="o">()</span>
<a href="#__codelineno-115-24" id="__codelineno-115-24" name="__codelineno-115-24"></a>   To permanently disable this reminder, run the following command: db.disableFreeMonitoring<span class="o">()</span>
<a href="#__codelineno-115-25" id="__codelineno-115-25" name="__codelineno-115-25"></a>------
<a href="#__codelineno-115-26" id="__codelineno-115-26" name="__codelineno-115-26"></a>
<a href="#__codelineno-115-27" id="__codelineno-115-27" name="__codelineno-115-27"></a>Warning: Found ~/.mongorc.js, but not ~/.mongoshrc.js. ~/.mongorc.js will not be loaded.
<a href="#__codelineno-115-28" id="__codelineno-115-28" name="__codelineno-115-28"></a>  You may want to copy or rename ~/.mongorc.js to ~/.mongoshrc.js.
<a href="#__codelineno-115-29" id="__codelineno-115-29" name="__codelineno-115-29"></a>test&gt;
</code></pre></div>
<h3 id="43-creacion-de-la-base-de-datos">4.3 Creación de la base de datos</h3>
<p>Si no existe la bd con el nombre que le digamos, la creará:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-116-1" id="__codelineno-116-1" name="__codelineno-116-1"></a><span class="n">test</span><span class="o">&gt;</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w"></span>
<a href="#__codelineno-116-2" id="__codelineno-116-2" name="__codelineno-116-2"></a><span class="n">switched</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w"></span>
<a href="#__codelineno-116-3" id="__codelineno-116-3" name="__codelineno-116-3"></a><span class="n">bibliofilos</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se ha creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-117-1" id="__codelineno-117-1" name="__codelineno-117-1"></a>bibliofilos&gt; show dbs
<a href="#__codelineno-117-2" id="__codelineno-117-2" name="__codelineno-117-2"></a>admin    <span class="m">40</span>.00 KiB
<a href="#__codelineno-117-3" id="__codelineno-117-3" name="__codelineno-117-3"></a>config  <span class="m">108</span>.00 KiB
<a href="#__codelineno-117-4" id="__codelineno-117-4" name="__codelineno-117-4"></a><span class="nb">local</span>    <span class="m">40</span>.00 KiB
</code></pre></div>
<p>La bd no aparece listada por ahora porque necesita contener datos para aparecer.</p>
<h3 id="44-creacion-de-colecciones">4.4 Creación de colecciones</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-118-1" id="__codelineno-118-1" name="__codelineno-118-1"></a><span class="n">db</span><span class="p">.</span><span class="n">createCollection</span><span class="p">(</span><span class="ss">"bibliotecas"</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-118-2" id="__codelineno-118-2" name="__codelineno-118-2"></a>
<a href="#__codelineno-118-3" id="__codelineno-118-3" name="__codelineno-118-3"></a><span class="n">db</span><span class="p">.</span><span class="n">createCollection</span><span class="p">(</span><span class="ss">"libros"</span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-118-4" id="__codelineno-118-4" name="__codelineno-118-4"></a>
<a href="#__codelineno-118-5" id="__codelineno-118-5" name="__codelineno-118-5"></a><span class="n">db</span><span class="p">.</span><span class="n">createCollection</span><span class="p">(</span><span class="ss">"trabajadores"</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-119-1" id="__codelineno-119-1" name="__codelineno-119-1"></a>bibliofilos&gt; show collections
<a href="#__codelineno-119-2" id="__codelineno-119-2" name="__codelineno-119-2"></a>bibliotecas
<a href="#__codelineno-119-3" id="__codelineno-119-3" name="__codelineno-119-3"></a>libros
<a href="#__codelineno-119-4" id="__codelineno-119-4" name="__codelineno-119-4"></a>trabajadores
</code></pre></div>
<h3 id="45-insercion-de-documentos">4.5 Inserción de documentos</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-120-1" id="__codelineno-120-1" name="__codelineno-120-1"></a><span class="n">db</span><span class="p">.</span><span class="n">bibliotecas</span><span class="p">.</span><span class="n">insertMany</span><span class="p">(</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a href="#__codelineno-120-2" id="__codelineno-120-2" name="__codelineno-120-2"></a><span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="n">ciudad</span><span class="p">:</span><span class="w"> </span><span class="ss">"Utrera"</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">:</span><span class="w"> </span><span class="ss">"Alvarez Quintero"</span><span class="w"> </span><span class="err">}</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-120-3" id="__codelineno-120-3" name="__codelineno-120-3"></a><span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="n">ciudad</span><span class="p">:</span><span class="w"> </span><span class="ss">"Dos Hermanas"</span><span class="p">,</span><span class="w"> </span><span class="n">calle</span><span class="p">:</span><span class="w"> </span><span class="ss">"Plaza Huerta Palacios"</span><span class="w"> </span><span class="err">}</span><span class="w"></span>
<a href="#__codelineno-120-4" id="__codelineno-120-4" name="__codelineno-120-4"></a><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-120-5" id="__codelineno-120-5" name="__codelineno-120-5"></a>
<a href="#__codelineno-120-6" id="__codelineno-120-6" name="__codelineno-120-6"></a><span class="n">db</span><span class="p">.</span><span class="n">libros</span><span class="p">.</span><span class="n">insertMany</span><span class="p">(</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a href="#__codelineno-120-7" id="__codelineno-120-7" name="__codelineno-120-7"></a><span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">:</span><span class="w"> </span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">:</span><span class="w"> </span><span class="ss">"Dale Carnegie"</span><span class="w"> </span><span class="err">}</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-120-8" id="__codelineno-120-8" name="__codelineno-120-8"></a><span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="n">n_paginas</span><span class="p">:</span><span class="w"> </span><span class="mi">714</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">:</span><span class="w"> </span><span class="ss">"Anne Frank"</span><span class="w"> </span><span class="err">}</span><span class="w"></span>
<a href="#__codelineno-120-9" id="__codelineno-120-9" name="__codelineno-120-9"></a><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<a href="#__codelineno-120-10" id="__codelineno-120-10" name="__codelineno-120-10"></a>
<a href="#__codelineno-120-11" id="__codelineno-120-11" name="__codelineno-120-11"></a><span class="n">db</span><span class="p">.</span><span class="n">trabajadores</span><span class="p">.</span><span class="n">insertMany</span><span class="p">(</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a href="#__codelineno-120-12" id="__codelineno-120-12" name="__codelineno-120-12"></a><span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="ss">"Pepe"</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">:</span><span class="w"> </span><span class="ss">"Pepito"</span><span class="w"> </span><span class="err">}</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-120-13" id="__codelineno-120-13" name="__codelineno-120-13"></a><span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="ss">"Jose"</span><span class="p">,</span><span class="w"> </span><span class="n">apellido</span><span class="p">:</span><span class="w"> </span><span class="ss">"Joselito"</span><span class="w"> </span><span class="err">}</span><span class="w"></span>
<a href="#__codelineno-120-14" id="__codelineno-120-14" name="__codelineno-120-14"></a><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se han insertado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-121-1" id="__codelineno-121-1" name="__codelineno-121-1"></a>bibliofilos&gt; db.bibliotecas.find<span class="o">()</span>
<a href="#__codelineno-121-2" id="__codelineno-121-2" name="__codelineno-121-2"></a><span class="o">[</span>
<a href="#__codelineno-121-3" id="__codelineno-121-3" name="__codelineno-121-3"></a>  <span class="o">{</span>
<a href="#__codelineno-121-4" id="__codelineno-121-4" name="__codelineno-121-4"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"635126caf4c5855bf45547d3"</span><span class="o">)</span>,
<a href="#__codelineno-121-5" id="__codelineno-121-5" name="__codelineno-121-5"></a>    ciudad: <span class="s1">'Utrera'</span>,
<a href="#__codelineno-121-6" id="__codelineno-121-6" name="__codelineno-121-6"></a>    calle: <span class="s1">'Alvarez Quintero'</span>
<a href="#__codelineno-121-7" id="__codelineno-121-7" name="__codelineno-121-7"></a>  <span class="o">}</span>,
<a href="#__codelineno-121-8" id="__codelineno-121-8" name="__codelineno-121-8"></a>  <span class="o">{</span>
<a href="#__codelineno-121-9" id="__codelineno-121-9" name="__codelineno-121-9"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"635126caf4c5855bf45547d4"</span><span class="o">)</span>,
<a href="#__codelineno-121-10" id="__codelineno-121-10" name="__codelineno-121-10"></a>    ciudad: <span class="s1">'Dos Hermanas'</span>,
<a href="#__codelineno-121-11" id="__codelineno-121-11" name="__codelineno-121-11"></a>    calle: <span class="s1">'Plaza Huerta Palacios'</span>
<a href="#__codelineno-121-12" id="__codelineno-121-12" name="__codelineno-121-12"></a>  <span class="o">}</span>
<a href="#__codelineno-121-13" id="__codelineno-121-13" name="__codelineno-121-13"></a><span class="o">]</span>
<a href="#__codelineno-121-14" id="__codelineno-121-14" name="__codelineno-121-14"></a>bibliofilos&gt; db.libros.find<span class="o">()</span>
<a href="#__codelineno-121-15" id="__codelineno-121-15" name="__codelineno-121-15"></a><span class="o">[</span>
<a href="#__codelineno-121-16" id="__codelineno-121-16" name="__codelineno-121-16"></a>  <span class="o">{</span>
<a href="#__codelineno-121-17" id="__codelineno-121-17" name="__codelineno-121-17"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"63512712f4c5855bf45547d5"</span><span class="o">)</span>,
<a href="#__codelineno-121-18" id="__codelineno-121-18" name="__codelineno-121-18"></a>    n_paginas: <span class="m">320</span>,
<a href="#__codelineno-121-19" id="__codelineno-121-19" name="__codelineno-121-19"></a>    autor: <span class="s1">'Dale Carnegie'</span>
<a href="#__codelineno-121-20" id="__codelineno-121-20" name="__codelineno-121-20"></a>  <span class="o">}</span>,
<a href="#__codelineno-121-21" id="__codelineno-121-21" name="__codelineno-121-21"></a>  <span class="o">{</span>
<a href="#__codelineno-121-22" id="__codelineno-121-22" name="__codelineno-121-22"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"63512712f4c5855bf45547d6"</span><span class="o">)</span>,
<a href="#__codelineno-121-23" id="__codelineno-121-23" name="__codelineno-121-23"></a>    n_paginas: <span class="m">714</span>,
<a href="#__codelineno-121-24" id="__codelineno-121-24" name="__codelineno-121-24"></a>    autor: <span class="s1">'Anne Frank'</span>
<a href="#__codelineno-121-25" id="__codelineno-121-25" name="__codelineno-121-25"></a>  <span class="o">}</span>
<a href="#__codelineno-121-26" id="__codelineno-121-26" name="__codelineno-121-26"></a><span class="o">]</span>
<a href="#__codelineno-121-27" id="__codelineno-121-27" name="__codelineno-121-27"></a>bibliofilos&gt; db.trabajadores.find<span class="o">()</span>
<a href="#__codelineno-121-28" id="__codelineno-121-28" name="__codelineno-121-28"></a><span class="o">[</span>
<a href="#__codelineno-121-29" id="__codelineno-121-29" name="__codelineno-121-29"></a>  <span class="o">{</span>
<a href="#__codelineno-121-30" id="__codelineno-121-30" name="__codelineno-121-30"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"6351271cf4c5855bf45547d7"</span><span class="o">)</span>,
<a href="#__codelineno-121-31" id="__codelineno-121-31" name="__codelineno-121-31"></a>    nombre: <span class="s1">'Pepe'</span>,
<a href="#__codelineno-121-32" id="__codelineno-121-32" name="__codelineno-121-32"></a>    apellido: <span class="s1">'Pepito'</span>
<a href="#__codelineno-121-33" id="__codelineno-121-33" name="__codelineno-121-33"></a>  <span class="o">}</span>,
<a href="#__codelineno-121-34" id="__codelineno-121-34" name="__codelineno-121-34"></a>  <span class="o">{</span>
<a href="#__codelineno-121-35" id="__codelineno-121-35" name="__codelineno-121-35"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"6351271cf4c5855bf45547d8"</span><span class="o">)</span>,
<a href="#__codelineno-121-36" id="__codelineno-121-36" name="__codelineno-121-36"></a>    nombre: <span class="s1">'Jose'</span>,
<a href="#__codelineno-121-37" id="__codelineno-121-37" name="__codelineno-121-37"></a>    apellido: <span class="s1">'Joselito'</span>
<a href="#__codelineno-121-38" id="__codelineno-121-38" name="__codelineno-121-38"></a>  <span class="o">}</span>
<a href="#__codelineno-121-39" id="__codelineno-121-39" name="__codelineno-121-39"></a><span class="o">]</span>
</code></pre></div>
<h3 id="46-creacion-de-usuarios">4.6 Creación de usuarios</h3>
<p>Usuario con permisos sobre <code>bibliofilos</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-122-1" id="__codelineno-122-1" name="__codelineno-122-1"></a><span class="n">use</span><span class="w"> </span><span class="n">bibliofilos</span><span class="w"></span>
<a href="#__codelineno-122-2" id="__codelineno-122-2" name="__codelineno-122-2"></a><span class="n">db</span><span class="p">.</span><span class="k">createUser</span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-122-3" id="__codelineno-122-3" name="__codelineno-122-3"></a><span class="w">  </span><span class="err">{</span><span class="w"></span>
<a href="#__codelineno-122-4" id="__codelineno-122-4" name="__codelineno-122-4"></a><span class="w">    </span><span class="k">user</span><span class="p">:</span><span class="w"> </span><span class="ss">"bibliofilos_admin"</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-122-5" id="__codelineno-122-5" name="__codelineno-122-5"></a><span class="w">    </span><span class="n">pwd</span><span class="p">:</span><span class="w"> </span><span class="ss">"1234"</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-122-6" id="__codelineno-122-6" name="__codelineno-122-6"></a><span class="w">    </span><span class="n">roles</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="ss">"dbOwner"</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<a href="#__codelineno-122-7" id="__codelineno-122-7" name="__codelineno-122-7"></a><span class="w">  </span><span class="err">}</span><span class="w"></span>
<a href="#__codelineno-122-8" id="__codelineno-122-8" name="__codelineno-122-8"></a><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se ha creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-123-1" id="__codelineno-123-1" name="__codelineno-123-1"></a>bibliofilos&gt; db.getUsers<span class="o">()</span>
<a href="#__codelineno-123-2" id="__codelineno-123-2" name="__codelineno-123-2"></a><span class="o">{</span>
<a href="#__codelineno-123-3" id="__codelineno-123-3" name="__codelineno-123-3"></a>  users: <span class="o">[</span>
<a href="#__codelineno-123-4" id="__codelineno-123-4" name="__codelineno-123-4"></a>    <span class="o">{</span>
<a href="#__codelineno-123-5" id="__codelineno-123-5" name="__codelineno-123-5"></a>      _id: <span class="s1">'bibliofilos.bibliofilos_admin'</span>,
<a href="#__codelineno-123-6" id="__codelineno-123-6" name="__codelineno-123-6"></a>      userId: new UUID<span class="o">(</span><span class="s2">"e420bea0-b85f-4914-a395-2f2b20b3aa48"</span><span class="o">)</span>,
<a href="#__codelineno-123-7" id="__codelineno-123-7" name="__codelineno-123-7"></a>      user: <span class="s1">'bibliofilos_admin'</span>,
<a href="#__codelineno-123-8" id="__codelineno-123-8" name="__codelineno-123-8"></a>      db: <span class="s1">'bibliofilos'</span>,
<a href="#__codelineno-123-9" id="__codelineno-123-9" name="__codelineno-123-9"></a>      roles: <span class="o">[</span> <span class="o">{</span> role: <span class="s1">'dbOwner'</span>, db: <span class="s1">'bibliofilos'</span> <span class="o">}</span> <span class="o">]</span>,
<a href="#__codelineno-123-10" id="__codelineno-123-10" name="__codelineno-123-10"></a>      mechanisms: <span class="o">[</span> <span class="s1">'SCRAM-SHA-1'</span>, <span class="s1">'SCRAM-SHA-256'</span> <span class="o">]</span>
<a href="#__codelineno-123-11" id="__codelineno-123-11" name="__codelineno-123-11"></a>    <span class="o">}</span>
<a href="#__codelineno-123-12" id="__codelineno-123-12" name="__codelineno-123-12"></a>  <span class="o">]</span>,
<a href="#__codelineno-123-13" id="__codelineno-123-13" name="__codelineno-123-13"></a>  ok: <span class="m">1</span>
<a href="#__codelineno-123-14" id="__codelineno-123-14" name="__codelineno-123-14"></a><span class="o">}</span>
</code></pre></div>
<p>Usuario administrador:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-124-1" id="__codelineno-124-1" name="__codelineno-124-1"></a><span class="n">use</span><span class="w"> </span><span class="k">admin</span><span class="w"></span>
<a href="#__codelineno-124-2" id="__codelineno-124-2" name="__codelineno-124-2"></a><span class="n">db</span><span class="p">.</span><span class="k">createUser</span><span class="p">(</span><span class="w"></span>
<a href="#__codelineno-124-3" id="__codelineno-124-3" name="__codelineno-124-3"></a><span class="w">  </span><span class="err">{</span><span class="w"></span>
<a href="#__codelineno-124-4" id="__codelineno-124-4" name="__codelineno-124-4"></a><span class="w">    </span><span class="k">user</span><span class="p">:</span><span class="w"> </span><span class="ss">"admin"</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-124-5" id="__codelineno-124-5" name="__codelineno-124-5"></a><span class="w">    </span><span class="n">pwd</span><span class="p">:</span><span class="w"> </span><span class="ss">"1234"</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-124-6" id="__codelineno-124-6" name="__codelineno-124-6"></a><span class="w">    </span><span class="n">roles</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a href="#__codelineno-124-7" id="__codelineno-124-7" name="__codelineno-124-7"></a><span class="w">      </span><span class="err">{</span><span class="w"> </span><span class="k">role</span><span class="p">:</span><span class="w"> </span><span class="ss">"userAdminAnyDatabase"</span><span class="p">,</span><span class="w"> </span><span class="n">db</span><span class="p">:</span><span class="w"> </span><span class="ss">"admin"</span><span class="w"> </span><span class="err">}</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-124-8" id="__codelineno-124-8" name="__codelineno-124-8"></a><span class="w">      </span><span class="err">{</span><span class="w"> </span><span class="k">role</span><span class="p">:</span><span class="w"> </span><span class="ss">"readWriteAnyDatabase"</span><span class="p">,</span><span class="w"> </span><span class="n">db</span><span class="p">:</span><span class="w"> </span><span class="ss">"admin"</span><span class="w"> </span><span class="err">}</span><span class="w"></span>
<a href="#__codelineno-124-9" id="__codelineno-124-9" name="__codelineno-124-9"></a><span class="w">    </span><span class="p">]</span><span class="w"></span>
<a href="#__codelineno-124-10" id="__codelineno-124-10" name="__codelineno-124-10"></a><span class="w">  </span><span class="err">}</span><span class="w"></span>
<a href="#__codelineno-124-11" id="__codelineno-124-11" name="__codelineno-124-11"></a><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Compruebo que se ha creado:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-125-1" id="__codelineno-125-1" name="__codelineno-125-1"></a>admin&gt; db.getUsers<span class="o">()</span>
<a href="#__codelineno-125-2" id="__codelineno-125-2" name="__codelineno-125-2"></a><span class="o">{</span>
<a href="#__codelineno-125-3" id="__codelineno-125-3" name="__codelineno-125-3"></a>  users: <span class="o">[</span>
<a href="#__codelineno-125-4" id="__codelineno-125-4" name="__codelineno-125-4"></a>    <span class="o">{</span>
<a href="#__codelineno-125-5" id="__codelineno-125-5" name="__codelineno-125-5"></a>      _id: <span class="s1">'admin.admin'</span>,
<a href="#__codelineno-125-6" id="__codelineno-125-6" name="__codelineno-125-6"></a>      userId: new UUID<span class="o">(</span><span class="s2">"022fafb9-953b-4e5e-985f-6634d0ed954c"</span><span class="o">)</span>,
<a href="#__codelineno-125-7" id="__codelineno-125-7" name="__codelineno-125-7"></a>      user: <span class="s1">'admin'</span>,
<a href="#__codelineno-125-8" id="__codelineno-125-8" name="__codelineno-125-8"></a>      db: <span class="s1">'admin'</span>,
<a href="#__codelineno-125-9" id="__codelineno-125-9" name="__codelineno-125-9"></a>      roles: <span class="o">[</span>
<a href="#__codelineno-125-10" id="__codelineno-125-10" name="__codelineno-125-10"></a>        <span class="o">{</span> role: <span class="s1">'userAdminAnyDatabase'</span>, db: <span class="s1">'admin'</span> <span class="o">}</span>,
<a href="#__codelineno-125-11" id="__codelineno-125-11" name="__codelineno-125-11"></a>        <span class="o">{</span> role: <span class="s1">'readWriteAnyDatabase'</span>, db: <span class="s1">'admin'</span> <span class="o">}</span>
<a href="#__codelineno-125-12" id="__codelineno-125-12" name="__codelineno-125-12"></a>      <span class="o">]</span>,
<a href="#__codelineno-125-13" id="__codelineno-125-13" name="__codelineno-125-13"></a>      mechanisms: <span class="o">[</span> <span class="s1">'SCRAM-SHA-1'</span>, <span class="s1">'SCRAM-SHA-256'</span> <span class="o">]</span>
<a href="#__codelineno-125-14" id="__codelineno-125-14" name="__codelineno-125-14"></a>    <span class="o">}</span>
<a href="#__codelineno-125-15" id="__codelineno-125-15" name="__codelineno-125-15"></a>  <span class="o">]</span>,
<a href="#__codelineno-125-16" id="__codelineno-125-16" name="__codelineno-125-16"></a>  ok: <span class="m">1</span>
<a href="#__codelineno-125-17" id="__codelineno-125-17" name="__codelineno-125-17"></a><span class="o">}</span>
</code></pre></div>
<h3 id="47-configuracion-del-acceso-remoto">4.7 Configuración del acceso remoto</h3>
<p>Modifico la siguiente línea en <code>/etc/mongod.conf</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-126-1" id="__codelineno-126-1" name="__codelineno-126-1"></a>bindIp: <span class="m">0</span>.0.0.0
</code></pre></div>
<p>Añado las siguientes líneas en <code>/etc/mongod.conf</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-127-1" id="__codelineno-127-1" name="__codelineno-127-1"></a>security:
<a href="#__codelineno-127-2" id="__codelineno-127-2" name="__codelineno-127-2"></a>  authorization: enabled
</code></pre></div>
<p>Reinicio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-128-1" id="__codelineno-128-1" name="__codelineno-128-1"></a>sudo systemctl restart mongod
</code></pre></div>
<p>Pruebo que el cambio se aplicó:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-129-1" id="__codelineno-129-1" name="__codelineno-129-1"></a>vagrant@servidormongodb:~$ netstat -ant <span class="p">|</span> grep <span class="m">27017</span>
<a href="#__codelineno-129-2" id="__codelineno-129-2" name="__codelineno-129-2"></a>tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">0</span>.0.0.0:27017           <span class="m">0</span>.0.0.0:*               LISTEN
</code></pre></div>
<h3 id="48-instalacion-del-cliente">4.8 Instalación del cliente</h3>
<p>Se hará sobre <code>clientemongodb</code>.</p>
<p>Añado el repositorio:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-130-1" id="__codelineno-130-1" name="__codelineno-130-1"></a><span class="nb">echo</span> <span class="s2">"deb http://repo.mongodb.org/apt/debian bullseye/mongodb-org/5.0 main"</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list
</code></pre></div>
<p>Añado la clave GPG:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-131-1" id="__codelineno-131-1" name="__codelineno-131-1"></a>curl -sSL https://www.mongodb.org/static/pgp/server-5.0.asc  -o mongoserver.asc
<a href="#__codelineno-131-2" id="__codelineno-131-2" name="__codelineno-131-2"></a>gpg --no-default-keyring --keyring ./mongo_key_temp.gpg --import ./mongoserver.asc
<a href="#__codelineno-131-3" id="__codelineno-131-3" name="__codelineno-131-3"></a>gpg --no-default-keyring --keyring ./mongo_key_temp.gpg --export &gt; ./mongoserver_key.gpg
<a href="#__codelineno-131-4" id="__codelineno-131-4" name="__codelineno-131-4"></a>sudo mv mongoserver_key.gpg /etc/apt/trusted.gpg.d/
</code></pre></div>
<p>Actualizo:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-132-1" id="__codelineno-132-1" name="__codelineno-132-1"></a>sudo apt update
</code></pre></div>
<p>Instalo:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-133-1" id="__codelineno-133-1" name="__codelineno-133-1"></a>sudo apt install mongodb-org-shell mongodb-mongosh
</code></pre></div>
<h3 id="49-prueba-de-acceso-remoto">4.9 Prueba de acceso remoto</h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-134-1" id="__codelineno-134-1" name="__codelineno-134-1"></a>vagrant@clientemongodb:~$ mongosh -u bibliofilos_admin -p <span class="m">1234</span> <span class="m">10</span>.0.3.2/bibliofilos
<a href="#__codelineno-134-2" id="__codelineno-134-2" name="__codelineno-134-2"></a>Current Mongosh Log ID:6351bcb93f3b38d91c3c973b
<a href="#__codelineno-134-3" id="__codelineno-134-3" name="__codelineno-134-3"></a>Connecting to:          mongodb://&lt;credentials&gt;@10.0.3.2:27017/bibliofilos?directConnection<span class="o">=</span>true<span class="p">&amp;</span><span class="nv">appName</span><span class="o">=</span>mongosh+1.6.0
<a href="#__codelineno-134-4" id="__codelineno-134-4" name="__codelineno-134-4"></a>Using MongoDB:          <span class="m">5</span>.0.13
<a href="#__codelineno-134-5" id="__codelineno-134-5" name="__codelineno-134-5"></a>Using Mongosh:          <span class="m">1</span>.6.0
<a href="#__codelineno-134-6" id="__codelineno-134-6" name="__codelineno-134-6"></a>
<a href="#__codelineno-134-7" id="__codelineno-134-7" name="__codelineno-134-7"></a>For mongosh info see: https://docs.mongodb.com/mongodb-shell/
<a href="#__codelineno-134-8" id="__codelineno-134-8" name="__codelineno-134-8"></a>
<a href="#__codelineno-134-9" id="__codelineno-134-9" name="__codelineno-134-9"></a>Warning: Found ~/.mongorc.js, but not ~/.mongoshrc.js. ~/.mongorc.js will not be loaded.
<a href="#__codelineno-134-10" id="__codelineno-134-10" name="__codelineno-134-10"></a>  You may want to copy or rename ~/.mongorc.js to ~/.mongoshrc.js.
<a href="#__codelineno-134-11" id="__codelineno-134-11" name="__codelineno-134-11"></a>bibliofilos&gt; show dbs
<a href="#__codelineno-134-12" id="__codelineno-134-12" name="__codelineno-134-12"></a>bibliofilos  <span class="m">120</span>.00 KiB
<a href="#__codelineno-134-13" id="__codelineno-134-13" name="__codelineno-134-13"></a>bibliofilos&gt; show collections
<a href="#__codelineno-134-14" id="__codelineno-134-14" name="__codelineno-134-14"></a>bibliotecas
<a href="#__codelineno-134-15" id="__codelineno-134-15" name="__codelineno-134-15"></a>libros
<a href="#__codelineno-134-16" id="__codelineno-134-16" name="__codelineno-134-16"></a>trabajadores
<a href="#__codelineno-134-17" id="__codelineno-134-17" name="__codelineno-134-17"></a>bibliofilos&gt; db.bibliotecas.find<span class="o">()</span>
<a href="#__codelineno-134-18" id="__codelineno-134-18" name="__codelineno-134-18"></a><span class="o">[</span>
<a href="#__codelineno-134-19" id="__codelineno-134-19" name="__codelineno-134-19"></a>  <span class="o">{</span>
<a href="#__codelineno-134-20" id="__codelineno-134-20" name="__codelineno-134-20"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"635126caf4c5855bf45547d3"</span><span class="o">)</span>,
<a href="#__codelineno-134-21" id="__codelineno-134-21" name="__codelineno-134-21"></a>    ciudad: <span class="s1">'Utrera'</span>,
<a href="#__codelineno-134-22" id="__codelineno-134-22" name="__codelineno-134-22"></a>    calle: <span class="s1">'Alvarez Quintero'</span>
<a href="#__codelineno-134-23" id="__codelineno-134-23" name="__codelineno-134-23"></a>  <span class="o">}</span>,
<a href="#__codelineno-134-24" id="__codelineno-134-24" name="__codelineno-134-24"></a>  <span class="o">{</span>
<a href="#__codelineno-134-25" id="__codelineno-134-25" name="__codelineno-134-25"></a>    _id: ObjectId<span class="o">(</span><span class="s2">"635126caf4c5855bf45547d4"</span><span class="o">)</span>,
<a href="#__codelineno-134-26" id="__codelineno-134-26" name="__codelineno-134-26"></a>    ciudad: <span class="s1">'Dos Hermanas'</span>,
<a href="#__codelineno-134-27" id="__codelineno-134-27" name="__codelineno-134-27"></a>    calle: <span class="s1">'Plaza Huerta Palacios'</span>
<a href="#__codelineno-134-28" id="__codelineno-134-28" name="__codelineno-134-28"></a>  <span class="o">}</span>
<a href="#__codelineno-134-29" id="__codelineno-134-29" name="__codelineno-134-29"></a><span class="o">]</span>
</code></pre></div>
<h2 id="5-app-flask-con-mongodb">5. App Flask con MongoDB</h2>
<p>En <a href="https://github.com/adriasir123/flask-mongo">este repositorio</a> se encuentran tanto el código de la aplicación como su guía de uso y pruebas de funcionamiento.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Introducción" class="md-footer__link md-footer__link--prev" href="../../intro/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Introducción
            </div>
</div>
</a>
<a aria-label="Next: Alumno 2: José Juan" class="md-footer__link md-footer__link--next" href="../alumno2/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Alumno 2: José Juan
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.tabs", "navigation.sections"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
<script src="../../../javascripts/asciinema-player.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>